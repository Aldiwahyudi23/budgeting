import{d as f,i as P,C as q,k as z,c as k,o as l,w as d,a as t,b as a,g as u,p as g,e as n,F as w,h,t as p,v as U,f as v,q as H,u as r,y as O}from"./app-9QPMRC04.js";import{A as Q}from"./AppLayout-BXtqR8wP.js";import{_ as G}from"./CustomModal-DLm9gUd7.js";import{_ as S}from"./PrimaryButton-aP2qe7s9.js";import{_ as T}from"./SecondaryButton-DNO5iJnD.js";import{_ as C}from"./InputLabel-BB1nO45r.js";import{_ as V}from"./TextInput-DHSiMCnf.js";import{_ as A}from"./InputError-Wk88TV3H.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"p-4"},J={class:"flex flex-col md:flex-row justify-between items-center mb-4 space-y-4 md:space-y-0"},K={class:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4 w-full md:w-auto"},R=["value"],W={class:"relative"},X={class:"mt-4 overflow-x-auto"},Y={class:"min-w-full border bg-white rounded-lg shadow-md"},Z={class:"bg-gray-200"},ee={key:0,class:"px-4 py-2 text-center"},te={class:"px-4 py-2"},se={class:"px-4 py-2"},oe=["checked","onChange"],le={class:"px-4 py-2"},ae={class:"px-4 py-2"},ie={class:"px-4 py-2 text-center"},ne={key:0,class:"px-2 py-1 text-green-700 bg-green-200 rounded-full text-sm"},re={key:1,class:"px-2 py-1 text-red-700 bg-red-200 rounded-full text-sm"},de={key:0,class:"px-4 py-2 text-center"},ue={class:"mb-4"},ce=["value","disabled"],pe={key:0},me={class:"mb-4"},fe={class:"mb-4"},ve={class:"flex items-center"},_e={class:"flex justify-end mt-4"},Ve={__name:"Sub",props:{subSources:Array,sources:Array},setup($){const B=$,x=f(!1),m=f(!1),c=f(P().props.settings),o=q({id:null,source_id:"",name:"",description:"",is_active:!1}),_=f(""),y=f(""),D=z(()=>B.subSources.filter(i=>{const e=_.value?i.source_id===_.value:!0,s=i.name.toLowerCase().includes(y.value.toLowerCase());return e&&s})),M=(i,e=null)=>{m.value=i==="edit",m.value&&e?(o.id=e.id,o.source_id=e.source_id,o.name=e.name,o.description=e.description,o.is_active=!!e.is_active):o.reset(),x.value=!0},b=()=>{o.reset(),x.value=!1},E=()=>{m.value?o.put(route("sub-sources.update",o.id),{onSuccess:()=>b()}):o.post(route("sub-sources.store"),{onSuccess:()=>b()})},L=i=>{confirm("Apakah Anda yakin ingin menghapus sub source ini?")&&o.delete(route("sub-sources.destroy",i))},j=async i=>{try{i.public=!i.public,await axios.patch(`/sub-sources/${i.id}/update-public`,{public:i.public})}catch{category.public=!category.public}};return(i,e)=>(l(),k(Q,{title:"Sub Source"},{default:d(()=>[t("div",I,[t("div",J,[a(S,{onClick:e[0]||(e[0]=s=>M("create"))},{default:d(()=>e[7]||(e[7]=[u("Tambah Sub Sumber (Source)")])),_:1}),t("div",K,[g(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>_.value=s),class:"border rounded px-4 py-2 w-full md:w-48"},[e[8]||(e[8]=t("option",{value:""},"Semua Sumber (Source)",-1)),(l(!0),n(w,null,h(B.sources,s=>(l(),n("option",{key:s.id,value:s.id},p(s.name),9,R))),128))],512),[[U,_.value]]),t("div",W,[a(V,{modelValue:y.value,"onUpdate:modelValue":e[2]||(e[2]=s=>y.value=s),placeholder:"Cari Sub Sumber (Source)...",class:"w-full md:w-48 pl-10 pr-4 py-2 border"},null,8,["modelValue"]),e[9]||(e[9]=t("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-4.35-4.35m0 0A8.5 8.5 0 1010.5 19a8.5 8.5 0 006.15-2.85z"})],-1))])])]),t("div",X,[t("table",Y,[t("thead",Z,[t("tr",null,[e[10]||(e[10]=t("th",{class:"px-4 py-2 text-left"},"No",-1)),e[11]||(e[11]=t("th",{class:"px-4 py-2 text-center"},"Public",-1)),e[12]||(e[12]=t("th",{class:"px-4 py-2 text-left"},"Sumber",-1)),e[13]||(e[13]=t("th",{class:"px-4 py-2 text-left"},"Nama",-1)),e[14]||(e[14]=t("th",{class:"px-4 py-2 text-center"},"Status",-1)),c.value.btn_edit||c.value.btn_delete?(l(),n("th",ee,"Aksi")):v("",!0)])]),t("tbody",null,[(l(!0),n(w,null,h(D.value,(s,F)=>(l(),n("tr",{key:s.id,class:"border-b hover:bg-gray-100"},[t("td",te,p(F+1),1),t("td",se,[t("input",{type:"checkbox",checked:s.public,onChange:N=>j(s),class:"form-checkbox h-5 w-5 text-blue-600"},null,40,oe)]),t("td",le,p(s.source.name),1),t("td",ae,p(s.name),1),t("td",ie,[s.is_active?(l(),n("span",ne,"Aktif")):(l(),n("span",re,"Tidak Aktif"))]),c.value.btn_edit||c.value.btn_delete?(l(),n("td",de,[c.value.btn_edit?(l(),k(T,{key:0,onClick:N=>M("edit",s)},{default:d(()=>e[15]||(e[15]=[u("Edit")])),_:2},1032,["onClick"])):v("",!0),c.value.btn_delete?(l(),k(S,{key:1,class:"ml-2 bg-red-600 hover:bg-red-700",onClick:N=>L(s.id)},{default:d(()=>e[16]||(e[16]=[u("Hapus")])),_:2},1032,["onClick"])):v("",!0)])):v("",!0)]))),128))])])]),a(G,{show:x.value,title:m.value?"Edit Sub Source":"Tambah Sub Source",onClose:b},{content:d(()=>[t("form",{onSubmit:H(E,["prevent"])},[t("div",ue,[a(C,{for:"source_id"},{default:d(()=>e[17]||(e[17]=[u(" Sumber (Source) "),t("span",{class:"text-red-500 tsxt-m"},"*",-1)])),_:1}),g(t("select",{id:"source_id","onUpdate:modelValue":e[3]||(e[3]=s=>r(o).source_id=s),class:"block w-full border rounded-md p-2"},[(l(!0),n(w,null,h($.sources,s=>(l(),n("option",{key:s.id,value:s.id,disabled:!s.is_active},[u(p(s.name)+" ",1),s.is_active?v("",!0):(l(),n("span",pe,"(Tidak Aktif)"))],8,ce))),128))],512),[[U,r(o).source_id]]),a(A,{message:r(o).errors.source_id},null,8,["message"])]),t("div",me,[a(C,{for:"name"},{default:d(()=>e[18]||(e[18]=[u(" Nama Sub Sumber (Source) "),t("span",{class:"text-red-500 tsxt-m"},"*",-1)])),_:1}),a(V,{id:"name",modelValue:r(o).name,"onUpdate:modelValue":e[4]||(e[4]=s=>r(o).name=s),class:"block w-full"},null,8,["modelValue"]),a(A,{message:r(o).errors.name},null,8,["message"])]),t("div",fe,[a(C,{for:"description",value:"Deskripsi"}),a(V,{id:"description",modelValue:r(o).description,"onUpdate:modelValue":e[5]||(e[5]=s=>r(o).description=s),class:"block w-full"},null,8,["modelValue"]),a(A,{message:r(o).errors.description},null,8,["message"])]),t("div",ve,[g(t("input",{type:"checkbox",id:"is_active","onUpdate:modelValue":e[6]||(e[6]=s=>r(o).is_active=s),class:"mr-2"},null,512),[[O,r(o).is_active]]),e[19]||(e[19]=t("label",{for:"is_active"},"Aktif",-1))]),t("div",_e,[a(T,{type:"button",onClick:b},{default:d(()=>e[20]||(e[20]=[u("Batal")])),_:1}),a(S,{class:"ml-3",type:"submit"},{default:d(()=>[u(p(m.value?"Update":"Simpan"),1)]),_:1})])],32)]),_:1},8,["show","title"])])]),_:1}))}};export{Ve as default};
