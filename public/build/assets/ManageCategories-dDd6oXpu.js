import{d as h,k as V,c as D,o as l,w as f,a as t,b as B,g as m,e as d,F as _,h as y,n as b,p as w,y as S,f as C,t as c,W as M}from"./app-9QPMRC04.js";import{A as $}from"./AppLayout-BXtqR8wP.js";import{_ as q}from"./PrimaryButton-aP2qe7s9.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"p-4"},O={class:"container mx-auto p-2"},T={class:"flex justify-between items-center mb-6"},U={class:"bg-white rounded-lg shadow-md overflow-x-auto"},W={class:"min-w-full table-auto"},j={class:"divide-y divide-gray-200"},z={class:"px-6 py-4 whitespace-nowrap"},E=["value","disabled","onChange"],I={class:"px-6 py-4 whitespace-nowrap"},P={class:"category-name font-medium"},G={key:0,class:"text-xs text-red-500 ml-2"},H={class:"text-xs text-gray-500"},J={class:"px-6 py-4 whitespace-nowrap subcategory-indent"},Q=["value","disabled","onChange"],R={class:"px-6 py-4 whitespace-nowrap subcategory-indent"},X={class:"subcategory-name font-medium"},Y={key:0,class:"text-xs text-red-500 ml-2"},Z={class:"text-xs text-gray-500"},ee={key:1},te={__name:"ManageCategories",props:{categories:Array,subCategories:Array,userCategories:Array,userSubCategories:Array},setup(k){const r=k,i=h([]),n=h([]),x=V(()=>{const s=new Set;return r.categories.filter(e=>s.has(e.name)?!1:(s.add(e.name),!0))}),g=s=>r.subCategories.filter(e=>e.category_id===s),u=s=>r.userCategories.some(e=>e.name===s.name),p=s=>r.userSubCategories.some(e=>e.name===s.name),A=s=>{n.value.includes(s.id)?i.value.includes(s.category_id)||i.value.push(s.category_id):r.subCategories.some(a=>a.category_id===s.category_id&&n.value.includes(a.id))||(i.value=i.value.filter(a=>a!==s.category_id))},K=s=>{i.value.includes(s.id)||(n.value=n.value.filter(e=>!g(s.id).some(a=>a.id===e)))},N=()=>{M.post(route("categories.save"),{categories:i.value,subCategories:n.value},{onSuccess:()=>{i.value=[],n.value=[]}})};return(s,e)=>(l(),D($,{title:"Kelola Kategori"},{default:f(()=>[t("div",L,[t("div",O,[t("div",T,[e[3]||(e[3]=t("h3",{class:"text-xl font-semibold text-gray-800"},"Kelola Kategori",-1)),B(q,{onClick:N},{default:f(()=>e[2]||(e[2]=[m("Simpan Kategori Dipilih")])),_:1})]),t("div",U,[t("table",W,[e[5]||(e[5]=t("thead",{class:"bg-gray-200"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Pilih"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nama Kategori")])],-1)),t("tbody",j,[x.value.length>0?(l(!0),d(_,{key:0},y(x.value,a=>(l(),d(_,{key:a.id},[t("tr",{class:b({"disabled-row bg-blue-100":u(a)})},[t("td",z,[w(t("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=o=>i.value=o),value:a.id,disabled:u(a),onChange:o=>K(a)},null,40,E),[[S,i.value]])]),t("td",I,[t("div",P,[m(c(a.name)+" ",1),u(a)?(l(),d("span",G,"(Sudah Ada)")):C("",!0)]),t("div",H,c(a.description),1)])],2),(l(!0),d(_,null,y(g(a.id),o=>(l(),d("tr",{key:o.id,class:b({"disabled-row":p(o)})},[t("td",J,[w(t("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=v=>n.value=v),value:o.id,disabled:p(o),onChange:v=>A(o)},null,40,Q),[[S,n.value]])]),t("td",R,[t("div",X,[m(c(o.name)+" ",1),p(o)?(l(),d("span",Y,"(Sudah Ada)")):C("",!0)]),t("div",Z,c(o.description),1)])],2))),128))],64))),128)):(l(),d("tr",ee,e[4]||(e[4]=[t("td",{colspan:"2",class:"px-6 py-4 text-center text-sm text-gray-500"},"Tidak ada data kategori.",-1)])))])])])])])]),_:1}))}},ne=F(te,[["__scopeId","data-v-1134a56e"]]);export{ne as default};
