import{d as f,k as N,c as V,o as i,w as b,a as t,e as d,f as c,t as l,b as D,g,F as _,h as y,n as w,p as S,y as k,W as B}from"./app-xDsUzAyu.js";import{A as M}from"./AppLayout-Bf1I7wdw.js";import{_ as q}from"./PrimaryButton-DnhLbD4T.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-DL5Lhnio.js";const L={class:"p-4"},O={key:0,class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded"},T={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},U={class:"container mx-auto p-2"},W={class:"flex justify-between items-center mb-6"},j={class:"bg-white rounded-lg shadow-md overflow-x-auto"},z={class:"min-w-full table-auto"},E={class:"divide-y divide-gray-200"},I={class:"px-6 py-4 whitespace-nowrap"},P=["value","disabled","onChange"],G={class:"px-6 py-4 whitespace-nowrap"},H={class:"category-name font-medium"},J={key:0,class:"text-xs text-red-500 ml-2"},Q={class:"text-xs text-gray-500"},R={class:"px-6 py-4 whitespace-nowrap subcategory-indent"},X=["value","disabled","onChange"],Y={class:"px-6 py-4 whitespace-nowrap subcategory-indent"},Z={class:"subcategory-name font-medium"},ee={key:0,class:"text-xs text-red-500 ml-2"},te={class:"text-xs text-gray-500"},se={key:1},ae={__name:"ManageCategories",props:{categories:Array,subCategories:Array,userCategories:Array,userSubCategories:Array},setup(C){const u=C,r=f([]),n=f([]),h=N(()=>{const s=new Set;return u.categories.filter(e=>s.has(e.name)?!1:(s.add(e.name),!0))}),x=s=>u.subCategories.filter(e=>e.category_id===s),p=s=>u.userCategories.some(e=>e.name===s.name),m=s=>u.userSubCategories.some(e=>e.name===s.name),A=s=>{n.value.includes(s.id)?r.value.includes(s.category_id)||r.value.push(s.category_id):u.subCategories.some(a=>a.category_id===s.category_id&&n.value.includes(a.id))||(r.value=r.value.filter(a=>a!==s.category_id))},$=s=>{r.value.includes(s.id)||(n.value=n.value.filter(e=>!x(s.id).some(a=>a.id===e)))},K=()=>{B.post(route("categories.save"),{categories:r.value,subCategories:n.value},{onSuccess:()=>{r.value=[],n.value=[]}})};return(s,e)=>(i(),V(M,{title:"Kelola Kategori"},{default:b(()=>[t("div",L,[s.$page.props.flash.success?(i(),d("div",O,l(s.$page.props.flash.success),1)):c("",!0),s.$page.props.flash.error?(i(),d("div",T,l(s.$page.props.flash.error),1)):c("",!0),t("div",U,[t("div",W,[e[3]||(e[3]=t("h3",{class:"text-xl font-semibold text-gray-800"},"Kelola Kategori",-1)),D(q,{onClick:K},{default:b(()=>e[2]||(e[2]=[g("Simpan Kategori Dipilih")])),_:1})]),t("div",j,[t("table",z,[e[5]||(e[5]=t("thead",{class:"bg-gray-200"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Pilih"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nama Kategori")])],-1)),t("tbody",E,[h.value.length>0?(i(!0),d(_,{key:0},y(h.value,a=>(i(),d(_,{key:a.id},[t("tr",{class:w({"disabled-row bg-blue-100":p(a)})},[t("td",I,[S(t("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=o=>r.value=o),value:a.id,disabled:p(a),onChange:o=>$(a)},null,40,P),[[k,r.value]])]),t("td",G,[t("div",H,[g(l(a.name)+" ",1),p(a)?(i(),d("span",J,"(Sudah Ada)")):c("",!0)]),t("div",Q,l(a.description),1)])],2),(i(!0),d(_,null,y(x(a.id),o=>(i(),d("tr",{key:o.id,class:w({"disabled-row":m(o)})},[t("td",R,[S(t("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=v=>n.value=v),value:o.id,disabled:m(o),onChange:v=>A(o)},null,40,X),[[k,n.value]])]),t("td",Y,[t("div",Z,[g(l(o.name)+" ",1),m(o)?(i(),d("span",ee,"(Sudah Ada)")):c("",!0)]),t("div",te,l(o.description),1)])],2))),128))],64))),128)):(i(),d("tr",se,e[4]||(e[4]=[t("td",{colspan:"2",class:"px-6 py-4 text-center text-sm text-gray-500"},"Tidak ada data kategori.",-1)])))])])])])])]),_:1}))}},le=F(ae,[["__scopeId","data-v-7433beed"]]);export{le as default};
