import{B as F,i as h,d as _,k as U,C as E,c as k,o as i,w as n,a as t,b as a,g as m,e as p,f as v,F as L,h as T,t as x,q as j,u as r,p as I,y as q}from"./app-jJ-nd6kj.js";import{A as z}from"./AppLayout-Cqwvf_lv.js";import{_ as H}from"./CustomModal-DlzAg37n.js";import{_ as g}from"./PrimaryButton-C28UApSG.js";import{_ as C}from"./SecondaryButton-rj0Px9IE.js";import{_ as V}from"./InputLabel-DjgbjLQk.js";import{_ as w}from"./TextInput-Dk9dqvW1.js";import{_ as A}from"./InputError-BtS9bL3c.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"p-4"},Q={class:"flex flex-col md:flex-row justify-between items-center mb-4 space-y-4 md:space-y-0"},G={class:"relative"},J={class:"overflow-x-auto"},K={class:"min-w-full border bg-white rounded-lg shadow-md"},P={class:"bg-gray-200"},R={key:0,class:"px-4 py-2 text-center"},W={class:"px-4 py-2"},X={class:"px-4 py-2"},Y={class:"px-4 py-2"},Z={class:"px-4 py-2 text-center"},ee={key:0,class:"px-2 py-1 text-green-700 bg-green-200 rounded-full text-sm"},te={key:1,class:"px-2 py-1 text-red-700 bg-red-200 rounded-full text-sm"},se={key:0,class:"px-4 py-2 text-center"},oe={class:"mb-4"},le={class:"mb-4"},ae={class:"flex items-center"},ie={class:"flex justify-end mt-4"},be={__name:"Index",setup(ne){const d=F([...h().props.sources]),b=_(!1),c=_(!1),y=_(""),u=_(h().props.settings),$=U(()=>d.filter(l=>l.name.toLowerCase().includes(y.value.toLowerCase()))),s=E({...{id:"",name:"",description:"",is_active:!1}}),S=(l,e=null)=>{c.value=l==="edit",c.value&&e?(s.id=e.id,s.name=e.name,s.description=e.description,s.is_active=!!e.is_active):s.reset(),b.value=!0},f=()=>{s.reset(),b.value=!1},B=()=>{c.value?s.put(route("source.update",s.id),{onSuccess:()=>{const l=d.findIndex(e=>e.id===s.id);l!==-1&&(d[l]={...s.data()}),f()}}):s.post(route("source.store"),{onSuccess:l=>{d.unshift(l.props.sources[0]),f()}})},N=l=>{confirm("Apakah Anda yakin ingin menghapus sumber ini?")&&s.delete(route("source.destroy",l),{onSuccess:()=>{const e=d.findIndex(o=>o.id===l);e!==-1&&d.splice(e,1)}})};return(l,e)=>(i(),k(z,{title:"Source"},{default:n(()=>[t("div",O,[t("div",Q,[a(g,{onClick:e[0]||(e[0]=o=>S("create"))},{default:n(()=>e[5]||(e[5]=[m("Tambah Sumber (Source)")])),_:1}),t("div",G,[a(w,{modelValue:y.value,"onUpdate:modelValue":e[1]||(e[1]=o=>y.value=o),placeholder:"Cari Source...",class:"pl-10 pr-4 py-2 border rounded-md w-64"},null,8,["modelValue"]),e[6]||(e[6]=t("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-4.35-4.35m0 0A8.5 8.5 0 1010.5 19a8.5 8.5 0 006.15-2.85z"})],-1))])]),t("div",J,[t("table",K,[t("thead",P,[t("tr",null,[e[7]||(e[7]=t("th",{class:"px-4 py-2 text-left"},"No",-1)),e[8]||(e[8]=t("th",{class:"px-4 py-2 text-left"},"Nama",-1)),e[9]||(e[9]=t("th",{class:"px-4 py-2 text-left"},"Deskripsi",-1)),e[10]||(e[10]=t("th",{class:"px-4 py-2 text-center"},"Status",-1)),u.value.btn_edit||u.value.btn_delete?(i(),p("th",R,"Aksi")):v("",!0)])]),t("tbody",null,[(i(!0),p(L,null,T($.value,(o,M)=>(i(),p("tr",{key:o.id,class:"border-b hover:bg-gray-100"},[t("td",W,x(M+1),1),t("td",X,x(o.name),1),t("td",Y,x(o.description||"-"),1),t("td",Z,[o.is_active?(i(),p("span",ee,"Aktif")):(i(),p("span",te,"Tidak Aktif"))]),u.value.btn_edit||u.value.btn_delete?(i(),p("td",se,[u.value.btn_edit?(i(),k(C,{key:0,onClick:D=>S("edit",o)},{default:n(()=>e[11]||(e[11]=[m("Edit")])),_:2},1032,["onClick"])):v("",!0),u.value.btn_delete?(i(),k(g,{key:1,class:"ml-2 bg-red-600 hover:bg-red-700",onClick:D=>N(o.id)},{default:n(()=>e[12]||(e[12]=[m("Hapus")])),_:2},1032,["onClick"])):v("",!0)])):v("",!0)]))),128))])])]),a(H,{show:b.value,title:c.value?"Edit Sumber (Source)":"Tambah Sumber (Source)",onClose:f},{content:n(()=>[t("form",{onSubmit:j(B,["prevent"])},[t("div",oe,[a(V,{for:"name"},{default:n(()=>e[13]||(e[13]=[m(" Nama Sumber (Source) "),t("span",{class:"text-red-500 text-sm"},"*",-1)])),_:1}),a(w,{id:"name",modelValue:r(s).name,"onUpdate:modelValue":e[2]||(e[2]=o=>r(s).name=o),class:"block w-full"},null,8,["modelValue"]),a(A,{message:r(s).errors.name},null,8,["message"])]),t("div",le,[a(V,{for:"description",value:"Deskripsi"}),a(w,{id:"description",modelValue:r(s).description,"onUpdate:modelValue":e[3]||(e[3]=o=>r(s).description=o),class:"block w-full"},null,8,["modelValue"]),a(A,{message:r(s).errors.description},null,8,["message"])]),t("div",ae,[I(t("input",{type:"checkbox",id:"is_active","onUpdate:modelValue":e[4]||(e[4]=o=>r(s).is_active=o),class:"mr-2"},null,512),[[q,r(s).is_active]]),e[14]||(e[14]=t("label",{for:"is_active"},"Aktif",-1))]),t("div",ie,[a(C,{type:"button",onClick:f},{default:n(()=>e[15]||(e[15]=[m("Batal")])),_:1}),a(g,{class:"ml-3",type:"submit"},{default:n(()=>[m(x(c.value?"Update":"Simpan"),1)]),_:1})])],32)]),_:1},8,["show","title"])])]),_:1}))}};export{be as default};
