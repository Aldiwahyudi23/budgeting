import{d as S,C as I,k as N,l as $,j as E,c as K,o as d,w as r,a as t,b as l,e as u,t as m,g as o,F as U,h as j,f as y,n as F,q as H,u as n,p as _,y as T,v as L}from"./app-xDsUzAyu.js";import{A as O}from"./AppLayout-Bf1I7wdw.js";import{_ as R}from"./CustomModal-BnviBr1U.js";import{_ as B}from"./PrimaryButton-DnhLbD4T.js";import{_ as q}from"./SecondaryButton-Dt2gU7nE.js";import{_ as p}from"./InputLabel-Bt1oKNcN.js";import{_ as v}from"./TextInput-BYj_b5ry.js";import{_ as f}from"./InputError-D87L32QM.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-DL5Lhnio.js";const J={class:"p-4"},z={class:"container mx-auto p-2"},G={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center bg-white p-4 rounded-lg shadow-md mb-2"},Q={class:"flex flex-col sm:flex-row items-center gap-4 mt-4 sm:mt-0"},W={class:"bg-green-100 text-green-700 px-4 py-2 rounded-lg text-sm font-semibold shadow"},X={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},Y={class:"flex items-center justify-between"},Z={class:"text-lg font-semibold"},aa={class:"text-sm text-gray-500"},ta={class:"text-xl font-bold text-purple-600"},ea={class:"text-sm text-gray-500"},sa={key:0,class:"text-sm text-green-500"},na={key:1,class:"text-sm text-blue-500"},la={class:"mt-4 flex justify-between items-center"},ia={class:"flex space-x-2"},oa=["href"],da={key:1,class:"text-center bg-white p-2 rounded-lg shadow-md"},ra={class:"mb-4"},ua={class:"mb-4"},ma={class:"mb-4"},ga={class:"mb-4"},ca={class:"mb-4"},pa={class:"flex items-center"},fa={class:"mb-4"},ka={class:"flex items-center"},ba=["disabled"],xa={class:"mb-4"},ya={class:"flex items-center"},_a=["disabled"],va={key:0,class:"mb-4"},ha=["value","disabled"],wa={key:0},Ta={class:"flex justify-end mt-4"},Na={__name:"Index",props:{bills:Array,accountBanks:Array,totalActiveBills:Number},setup(k){const h=S(!1),g=S(!1),e=I({id:null,name:"",note:"",amount:"",balance:"",date:"",reminder:!1,auto:!1,is_active:!1,account_id:null}),b=i=>i?new Intl.NumberFormat("id-ID").format(i):"",M=i=>i?i.replace(/\./g,""):"",w=N({get:()=>b(e.amount),set:i=>{e.amount=M(i)}});$(()=>{w.value=b(e.amount)}),E(()=>e.is_active,i=>{i||(e.reminder=!1,e.auto=!1)});const V=(i,a=null)=>{var s,c;g.value=i==="edit",g.value&&a?(e.id=a.id,e.name=((s=a.sub_category)==null?void 0:s.name)||"",e.note=a.note,e.amount=a.amount,e.balance=a.balance,e.date=a.date,e.reminder=!!a.reminder,e.auto=!!a.auto,e.is_active=!!((c=a.sub_category)!=null&&c.is_active),e.account_id=a.account_id):e.reset(),h.value=!0},x=()=>{e.reset(),h.value=!1},P=()=>{g.value?e.put(route("bills.update",e.id),{onSuccess:()=>x()}):e.post(route("bills.store"),{onSuccess:()=>x()})},D=i=>i?new Date(i).getDate():"";return(i,a)=>(d(),K(O,{title:"Kelola Bill"},{default:r(()=>[t("div",J,[t("div",z,[t("div",G,[a[10]||(a[10]=t("div",null,[t("h1",{class:"text-xl font-semibold text-gray-800"},"Kelola Tagihan Bulanan"),t("p",{class:"text-sm text-gray-600 mt-1"}," Halaman ini digunakan untuk mengelola dan menambahkan data tagihan bulanan seperti listrik, internet, dan tagihan rutin lainnya. ")],-1)),t("div",Q,[t("div",W," ðŸ’° Total Tagihan Aktif: "+m(b(k.totalActiveBills)),1),l(B,{onClick:a[0]||(a[0]=s=>V("create"))},{default:r(()=>a[9]||(a[9]=[o("Tambah Bill (Tagihan)")])),_:1})])]),k.bills.length>0?(d(),u("div",X,[(d(!0),u(U,null,j(k.bills,s=>{var c,A,C;return d(),u("div",{key:s.id,class:"bg-white p-6 rounded-lg shadow-md"},[t("div",Y,[t("h2",Z,m(((c=s.sub_category)==null?void 0:c.name)||"Tanpa Kategori"),1),t("span",{class:F(["px-2 py-1 text-xs font-semibold rounded-lg",(A=s.sub_category)!=null&&A.is_active?"bg-green-100 text-green-600":"bg-red-100 text-red-600"])},m((C=s.sub_category)!=null&&C.is_active?"Aktif":"Tidak Aktif"),3)]),t("p",aa,m(s.note),1),t("p",ta,"Rp "+m(b(s.amount)),1),t("p",ea,"Tanggal Batas Akhir : "+m(D(s.date)),1),s.reminder?(d(),u("p",sa," Tagihan ini di set Pengingat dan akan diingatkan selalu. ")):y("",!0),s.auto?(d(),u("p",na," Setiap tanggal jatuh tempo, tagihan akan otomatis tersimpan ke data dan mengurangi saldo "+m(s.account_bank.name)+". ",1)):y("",!0),t("div",la,[t("div",ia,[l(B,{onClick:Ba=>V("edit",s)},{default:r(()=>a[11]||(a[11]=[o("Edit")])),_:2},1032,["onClick"])]),t("a",{href:i.route("history_pembayaran_bill",{id:s.id}),class:"text-sm text-blue-500 hover:text-blue-700 underline"}," History Pembayaran ",8,oa)])])}),128))])):(d(),u("div",da,a[12]||(a[12]=[t("p",{class:"text-gray-500 text-sm"},"Belum ada tagihan yang tercatat. Silakan tambahkan tagihan baru.",-1)]))),a[13]||(a[13]=t("div",{class:"mt-4 bg-gray-100 p-2 rounded-lg shadow-md"},[t("h2",{class:"text-lg font-semibold text-gray-800"},"Informasi Mengenai Tagihan"),t("p",{class:"text-sm text-gray-600 mt-2"}," Halaman ini digunakan untuk mencatat tagihan bulanan yang harus dibayar setiap bulannya, seperti bayar kost, listrik, wifi, atau tagihan rutin lainnya. Berikut cara menambahkan tagihan: "),t("ul",{class:"text-sm text-gray-600 mt-2 list-disc list-inside"},[t("li",null,"Klik tombol di atas kanan untuk menambahkan tagihan baru."),t("li",null,'Isi nama tagihan (contoh: "Bayar Listrik").'),t("li",null,"Masukkan nominal tagihan."),t("li",null,"Pilih tanggal jatuh tempo."),t("li",null,[o("Pilih mode pembayaran: "),t("ul",{class:"list-circle list-inside ml-4"},[t("li",null,[t("strong",null,"Auto"),o(": Jika pembayaran dilakukan otomatis (misalnya melalui admin bank).")]),t("li",null,[t("strong",null,"Pengingat"),o(": Untuk mendapatkan notifikasi sebelum jatuh tempo.")])])]),t("li",null,'Klik "Tambahkan" untuk menyimpan tagihan.')]),t("p",{class:"text-sm text-gray-600 mt-2"},[o(" Untuk pembayaran atau transaksi, silakan lakukan melalui halaman "),t("strong",null,"Transaksi Pengeluaran (Expenses)"),o(". Pilih kategori "),t("strong",null,"Bill (Tagihan)"),o(" dan tambahkan keterangan sesuai jenis tagihan yang dibayarkan. ")])],-1))]),l(R,{show:h.value,title:g.value?"Edit Bill (Tagihan)":"Tambah Bill (Tagihan)",onClose:x},{content:r(()=>[t("form",{onSubmit:H(P,["prevent"])},[t("div",ra,[l(p,{for:"name"},{default:r(()=>a[14]||(a[14]=[o(" Nama Bill (Tagihan) "),t("span",{class:"text-red-500 text-sm"},"*",-1)])),_:1}),l(v,{id:"name",modelValue:n(e).name,"onUpdate:modelValue":a[1]||(a[1]=s=>n(e).name=s),class:"block w-full",disabled:g.value,readonly:g.value},null,8,["modelValue","disabled","readonly"]),l(f,{message:n(e).errors.name},null,8,["message"])]),t("div",ua,[l(p,{for:"note"},{default:r(()=>a[15]||(a[15]=[o(" Catatan ")])),_:1}),l(v,{id:"note",modelValue:n(e).note,"onUpdate:modelValue":a[2]||(a[2]=s=>n(e).note=s),class:"block w-full"},null,8,["modelValue"]),l(f,{message:n(e).errors.note},null,8,["message"])]),t("div",ma,[l(p,{for:"amount"},{default:r(()=>a[16]||(a[16]=[o(" Nominal Tagihan "),t("span",{class:"text-red-500 text-sm"},"*",-1)])),_:1}),l(v,{id:"amount",type:"text",modelValue:w.value,"onUpdate:modelValue":a[3]||(a[3]=s=>w.value=s),onInput:i.handleAmountInput,class:"block w-full"},null,8,["modelValue","onInput"]),l(f,{message:n(e).errors.amount},null,8,["message"])]),t("div",ga,[l(p,{for:"date"},{default:r(()=>a[17]||(a[17]=[o(" Tanggal Tagihan "),t("span",{class:"text-red-500 text-sm"},"*",-1)])),_:1}),l(v,{id:"date",type:"date",modelValue:n(e).date,"onUpdate:modelValue":a[4]||(a[4]=s=>n(e).date=s),class:"block w-full"},null,8,["modelValue"]),l(f,{message:n(e).errors.date},null,8,["message"])]),t("div",ca,[t("label",pa,[_(t("input",{type:"checkbox","onUpdate:modelValue":a[5]||(a[5]=s=>n(e).is_active=s),class:"mr-2"},null,512),[[T,n(e).is_active]]),a[18]||(a[18]=t("span",null,"Status",-1))]),a[19]||(a[19]=t("p",{class:"text-sm text-gray-500"},"Jika Aktif akan bisa Transaksi",-1))]),t("div",fa,[t("label",ka,[_(t("input",{type:"checkbox","onUpdate:modelValue":a[6]||(a[6]=s=>n(e).reminder=s),class:"mr-2",disabled:!n(e).is_active},null,8,ba),[[T,n(e).reminder]]),a[20]||(a[20]=t("span",null,"Pengingat",-1))]),a[21]||(a[21]=t("p",{class:"text-sm text-gray-500"},"Akan diingatkan H-1 dari Tanggal",-1))]),t("div",xa,[t("label",ya,[_(t("input",{type:"checkbox","onUpdate:modelValue":a[7]||(a[7]=s=>n(e).auto=s),class:"mr-2",disabled:!n(e).is_active},null,8,_a),[[T,n(e).auto]]),a[22]||(a[22]=t("span",null,"Otomatis",-1))]),a[23]||(a[23]=t("p",{class:"text-sm text-gray-500"},"Secara Otomatis Masuk data sesuai tanggal",-1))]),n(e).auto===!0?(d(),u("div",va,[l(p,{for:"account_id"},{default:r(()=>a[24]||(a[24]=[o(" Sumber Rekening "),t("span",{class:"text-red-500 text-sm"},"*",-1)])),_:1}),_(t("select",{id:"account_id","onUpdate:modelValue":a[8]||(a[8]=s=>n(e).account_id=s),class:"block w-full border rounded-md p-2",required:""},[a[25]||(a[25]=t("option",{disabled:"",value:""},"Pilih Rekening",-1)),(d(!0),u(U,null,j(k.accountBanks,s=>(d(),u("option",{key:s.id,value:s.id,disabled:!s.is_active},[o(m(s.name)+" ",1),s.is_active?y("",!0):(d(),u("span",wa,"(Tidak Aktif)"))],8,ha))),128))],512),[[L,n(e).account_id]]),l(f,{message:n(e).errors.account_id},null,8,["message"])])):y("",!0),t("div",Ta,[l(q,{type:"button",onClick:x},{default:r(()=>a[26]||(a[26]=[o("Batal")])),_:1}),l(B,{class:"ml-3",type:"submit"},{default:r(()=>[o(m(g.value?"Update":"Simpan"),1)]),_:1})])],32)]),_:1},8,["show","title"])])]),_:1}))}};export{Na as default};
