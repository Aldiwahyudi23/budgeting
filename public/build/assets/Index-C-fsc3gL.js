import{d as S,C as O,k as v,l as G,c as Q,o as r,w as m,a as e,e as u,f as p,b as i,t as d,g as l,F as h,h as w,n as X,q as Y,u as o,p as _,v as $,y as I,W as K}from"./app-jJ-nd6kj.js";import{A as Z}from"./AppLayout-Cqwvf_lv.js";import{_ as ee}from"./CustomModal-DlzAg37n.js";import{_ as C}from"./PrimaryButton-C28UApSG.js";import{_ as te}from"./SecondaryButton-rj0Px9IE.js";import{_ as y}from"./InputLabel-DjgbjLQk.js";import{_ as A}from"./TextInput-Dk9dqvW1.js";import{_ as k}from"./InputError-BtS9bL3c.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ae={class:"p-4"},se={key:0,class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded"},ne={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},le={class:"container mx-auto p-2"},oe={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center bg-white p-4 rounded-lg shadow-md mb-2"},ie={key:0,class:"mt-6 text-ligth hidden sm:block"},re={class:"flex items-center gap-2 mt-4 sm:mt-0"},ue={key:0},de={class:"bg-white p-4 rounded-lg shadow-md"},me=["onClick"],pe={class:"text-gray-800"},ge={class:"text-purple-600 font-semibold"},ce={key:1,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-4"},fe={class:"flex items-center justify-between"},ye={class:"text-lg font-semibold"},ke={class:"text-gray-500 text-sm"},xe={class:"text-sm text-gray-500"},be={class:"text-xl font-bold text-purple-600"},_e={key:0,class:"text-sm text-gray-500"},ve={key:1,class:"text-sm text-gray-500"},he={key:2,class:"text-sm text-gray-500"},we={key:3,class:"text-sm text-green-500"},Ce={class:"mt-4 flex justify-between items-center"},He={class:"flex space-x-2"},Te=["href"],Ve={key:2,class:"text-center bg-white p-2 rounded-lg shadow-md mt-4"},De={class:"mb-4"},Se={class:"mb-4"},$e={class:"mb-4"},Ae={class:"mb-4"},Pe={key:0,class:"mb-4"},Be=["value"],Ee={key:1,class:"mb-4"},Me=["value"],Ue={class:"mb-4"},je={class:"flex items-center"},Ie={class:"mb-4"},Ke={class:"flex items-center"},Ne={class:"flex justify-end mt-4"},Qe={__name:"Index",props:{debts:Array},setup(N){const H=N,T=S(!1),c=S(!1),x=S(!1),s=O({id:null,name:"",amount:"",note:"",type:"",due_date:null,tenor_months:null,is_active:!1,reminder:!1}),P=(n,t=null)=>{var a,g;c.value=n==="edit",c.value&&t?(s.id=t.id,s.name=((a=t.sub_category)==null?void 0:a.name)||"",s.note=t.note,s.amount=t.amount,s.type=t.type,s.due_date=t.due_date,s.tenor_months=t.tenor_months,s.reminder=!!t.reminder,s.is_active=!!((g=t.sub_category)!=null&&g.is_active)):s.reset(),T.value=!0},f=()=>{s.reset(),T.value=!1},F=()=>{c.value?s.put(route("debts.update",s.id),{onSuccess:()=>{f()},onError:n=>{console.error("Error saat mengupdate data:",n)},onFinish:()=>{f()}}):s.post(route("debts.store"),{onSuccess:()=>{f()},onError:n=>{console.error("Error saat menyimpan data:",n)},onFinish:()=>{f()}})},J=n=>{confirm("Apakah Anda yakin ingin menghapus bill ini?")&&K.delete(route("debts.destroy",n))},B=v(()=>H.debts.filter(n=>n.status==="active")),E=v(()=>H.debts.filter(n=>n.status!=="active")),M=v(()=>H.debts.filter(n=>n.status==="paid")),b=n=>n?new Intl.NumberFormat("id-ID").format(n):"",L=n=>n?n.replace(/\./g,""):"",V=v({get:()=>b(s.amount),set:n=>{s.amount=L(n)}});G(()=>{V.value=b(s.amount)});const q=n=>n?new Date(n).getDate():"",R=n=>n.type==="installment"&&n.expenses?`${n.expenses.length}-${n.tenor_months}`:"",U=()=>{x.value=!x.value},W=n=>{K.visit(route("history_pembayaran_debt",{id:n}))};return(n,t)=>(r(),Q(Z,{title:"Kelola Hutang"},{default:m(()=>[e("div",ae,[n.$page.props.flash.success?(r(),u("div",se,d(n.$page.props.flash.success),1)):p("",!0),n.$page.props.flash.error?(r(),u("div",ne,d(n.$page.props.flash.error),1)):p("",!0),e("div",le,[e("div",oe,[e("div",null,[t[9]||(t[9]=e("h1",{class:"text-xl font-semibold text-gray-800"},"Kelola Hutang",-1)),t[10]||(t[10]=e("p",{class:"text-sm text-gray-600 mt-1"}," Halaman ini digunakan untuk mengelola dan menambahkan data hutang seperti hutang pribadi, cicilan, atau hutang bisnis. ",-1)),E.value.length>0?(r(),u("div",ie,[e("a",{onClick:U,class:"text-sm text-blue-500 hover:text-blue-700 cursor-pointer"},d(x.value?"Sembunyikan Hutang Selesai":"Lihat Hutang Selesai"),1)])):p("",!0)]),e("div",re,[i(C,{onClick:t[0]||(t[0]=a=>P("create"))},{default:m(()=>t[11]||(t[11]=[l("Tambah Hutang")])),_:1}),E.value.length>0?(r(),u("a",{key:0,onClick:U,class:"text-sm text-blue-500 hover:text-blue-700 cursor-pointer sm:hidden text-right"},d(x.value?"Sembunyikan Hutang Selesai":"Lihat Hutang Selesai"),1)):p("",!0)])]),x.value&&M.value.length>0?(r(),u("div",ue,[t[12]||(t[12]=e("h2",{class:"text-lg font-semibold mb-4"},"Hutang yang Sudah Dibayar",-1)),e("div",de,[(r(!0),u(h,null,w(M.value,a=>{var g;return r(),u("div",{key:a.id,class:"flex justify-between items-center py-2 border-b last:border-b-0 cursor-pointer hover:bg-gray-50",onClick:D=>W(a.id)},[e("span",pe,d(((g=a.sub_category)==null?void 0:g.name)||"Tanpa Kategori")+" ("+d(a.type=="installment"?"Kredit/Cicilan":a.type)+")",1),e("span",ge,"Rp "+d(b(a.amount)),1)],8,me)}),128))])])):p("",!0),B.value.length>0?(r(),u("div",ce,[(r(!0),u(h,null,w(B.value,a=>{var g,D,j;return r(),u("div",{key:a.id,class:"bg-white p-6 rounded-lg shadow-md"},[e("div",fe,[e("h2",ye,[l(d(((g=a.sub_category)==null?void 0:g.name)||"Tanpa Kategori")+" ",1),e("span",ke,"("+d(a.type=="installment"?"Kredit/Cicilan":a.type)+")",1)]),e("span",{class:X(["px-2 py-1 text-xs font-semibold rounded-lg",(D=a.sub_category)!=null&&D.is_active?"bg-green-100 text-green-600":"bg-red-100 text-red-600"])},d((j=a.sub_category)!=null&&j.is_active?"Aktif":"Tidak Aktif"),3)]),e("p",xe,d(a.note),1),e("p",be,"Rp "+d(b(a.amount)),1),a.type==="personal"?(r(),u("p",_e," Pembayaran = "+d(b(a.paid_amount)),1)):p("",!0),a.type==="installment"?(r(),u("p",ve," Tenor = "+d(R(a)),1)):p("",!0),a.type==="installment"?(r(),u("p",he,"Tanggal Jatuh Tempo: "+d(q(a.due_date)),1)):p("",!0),a.reminder?(r(),u("p",we," Hutang ini di set Pengingat dan akan diingatkan selalu. ")):p("",!0),e("div",Ce,[e("div",He,[i(C,{onClick:z=>P("edit",a)},{default:m(()=>t[13]||(t[13]=[l("Edit")])),_:2},1032,["onClick"]),i(C,{class:"bg-red-600 hover:bg-red-700",onClick:z=>J(a.id)},{default:m(()=>t[14]||(t[14]=[l("Hapus")])),_:2},1032,["onClick"])]),e("a",{href:n.route("history_pembayaran_debt",{id:a.id}),class:"text-sm text-blue-500 hover:text-blue-700 underline"}," History Pembayaran ",8,Te)])])}),128))])):(r(),u("div",Ve,t[15]||(t[15]=[e("p",{class:"text-gray-500 text-sm"},"Belum ada hutang yang tercatat. Silakan tambahkan hutang baru.",-1)]))),t[16]||(t[16]=e("div",{class:"mt-4 bg-gray-100 p-2 rounded-lg shadow-md"},[e("h2",{class:"text-lg font-semibold text-gray-800"},"Informasi Mengenai Hutang"),e("p",{class:"text-sm text-gray-600 mb-4"}," Halaman ini digunakan untuk mencatat semua hutang, baik hutang perorangan maupun hutang bertenor seperti kredit atau cicilan. Berikut cara menambahkan hutang: "),e("ul",{class:"text-sm text-gray-600 list-disc list-inside mb-6"},[e("li",null,"Klik tombol di atas kanan untuk menambahkan hutang baru."),e("li",null,'Pilih nama hutang (misal: "Hutang ke Ahmad" atau "Kredivo").'),e("li",null,"Tambahkan catatan (opsional)."),e("li",null,[l("Masukkan nominal: "),e("ul",{class:"list-circle list-inside ml-4"},[e("li",null,[e("strong",null,"Personal"),l(": Masukkan total hutang.")]),e("li",null,[e("strong",null,"Cicilan"),l(": Masukkan cicilan per bulannya.")])])]),e("li",null,[l("Pilih jenis hutang: "),e("strong",null,"Personal"),l(" atau "),e("strong",null,"Cicilan"),l(".")]),e("li",null,[l("Jika memilih "),e("strong",null,"Cicilan"),l(", tentukan tanggal jatuh tempo dan tenor (dalam bulan).")]),e("li",null,"Aktifkan hutang untuk memulai pencatatan."),e("li",null,[l("Pilih mode pembayaran: "),e("ul",{class:"list-circle list-inside ml-4"},[e("li",null,[e("strong",null,"Reminder"),l(": Dapatkan pengingat sebelum jatuh tempo.")])])])]),e("p",{class:"text-sm text-gray-600 mt-2"},[l(" Untuk pembayaran atau transaksi, silakan lakukan melalui halaman "),e("strong",null,"Transaksi Pengeluaran (Expenses)"),l(". Pilih kategori "),e("strong",null,"Hutang"),l(" dan tambahkan keterangan sesuai jenis hutang yang dibayarkan. ")])],-1))]),i(ee,{show:T.value,title:c.value?"Edit Hutang":"Tambah Hutang",onClose:f},{content:m(()=>[e("form",{onSubmit:Y(F,["prevent"])},[e("div",De,[i(y,{for:"name"},{default:m(()=>t[17]||(t[17]=[l(" Nama Hutang "),e("span",{class:"text-red-500 text-sm"},"*",-1)])),_:1}),i(A,{id:"name",modelValue:o(s).name,"onUpdate:modelValue":t[1]||(t[1]=a=>o(s).name=a),class:"block w-full",disabled:c.value,readonly:c.value},null,8,["modelValue","disabled","readonly"]),i(k,{message:o(s).errors.name},null,8,["message"])]),e("div",Se,[i(y,{for:"amount"},{default:m(()=>t[18]||(t[18]=[l(" Nominal Hutang "),e("span",{class:"text-red-500 text-sm"},"*",-1)])),_:1}),i(A,{id:"amount",type:"text",modelValue:V.value,"onUpdate:modelValue":t[2]||(t[2]=a=>V.value=a),onInput:n.handleAmountInput,class:"block w-full"},null,8,["modelValue","onInput"]),i(k,{message:o(s).errors.amount},null,8,["message"])]),e("div",$e,[i(y,{for:"note"},{default:m(()=>t[19]||(t[19]=[l(" Catatan ")])),_:1}),i(A,{id:"note",modelValue:o(s).note,"onUpdate:modelValue":t[3]||(t[3]=a=>o(s).note=a),class:"block w-full"},null,8,["modelValue"]),i(k,{message:o(s).errors.note},null,8,["message"])]),e("div",Ae,[i(y,{for:"type"},{default:m(()=>t[20]||(t[20]=[l(" Type Hutang "),e("span",{class:"text-red-500 text-sm"},"*",-1)])),_:1}),_(e("select",{id:"type","onUpdate:modelValue":t[4]||(t[4]=a=>o(s).type=a),class:"block w-full"},t[21]||(t[21]=[e("option",{disabled:"",value:""},"Pilih Tipe",-1),e("option",{value:"personal"},"Personal",-1),e("option",{value:"installment"},"Cicilan",-1)]),512),[[$,o(s).type]]),i(k,{message:o(s).errors.type},null,8,["message"])]),o(s).type==="installment"?(r(),u("div",Pe,[i(y,{for:"due_date"},{default:m(()=>t[22]||(t[22]=[l(" Tanggal Jatuh Tempo "),e("span",{class:"text-red-500 text-sm"},"*",-1)])),_:1}),_(e("select",{id:"due_date","onUpdate:modelValue":t[5]||(t[5]=a=>o(s).due_date=a),class:"block w-full",required:""},[(r(),u(h,null,w(31,a=>e("option",{key:a,value:a},d(a),9,Be)),64))],512),[[$,o(s).due_date]]),i(k,{message:o(s).errors.due_date},null,8,["message"])])):p("",!0),o(s).type==="installment"?(r(),u("div",Ee,[i(y,{for:"tenor_months"},{default:m(()=>t[23]||(t[23]=[l(" Tenor (Bulan) "),e("span",{class:"text-red-500 text-sm"},"*",-1)])),_:1}),_(e("select",{id:"tenor_months","onUpdate:modelValue":t[6]||(t[6]=a=>o(s).tenor_months=a),class:"block w-full",required:""},[(r(),u(h,null,w(12,a=>e("option",{key:a,value:a},d(a),9,Me)),64))],512),[[$,o(s).tenor_months]]),i(k,{message:o(s).errors.tenor_months},null,8,["message"])])):p("",!0),e("div",Ue,[e("label",je,[_(e("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=a=>o(s).is_active=a),class:"mr-2"},null,512),[[I,o(s).is_active]]),t[24]||(t[24]=e("span",null,"Status",-1))]),t[25]||(t[25]=e("p",{class:"text-sm text-gray-500"},"Jika Aktif akan bisa Transaksi",-1))]),e("div",Ie,[e("label",Ke,[_(e("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=a=>o(s).reminder=a),class:"mr-2"},null,512),[[I,o(s).reminder]]),t[26]||(t[26]=e("span",null,"Pengingat",-1))]),t[27]||(t[27]=e("p",{class:"text-sm text-gray-500"},"Akan diingatkan H-1 dari Tanggal",-1))]),e("div",Ne,[i(te,{type:"button",onClick:f},{default:m(()=>t[28]||(t[28]=[l("Batal")])),_:1}),i(C,{class:"ml-3",type:"submit"},{default:m(()=>[l(d(c.value?"Update":"Simpan"),1)]),_:1})])],32)]),_:1},8,["show","title"])])]),_:1}))}};export{Qe as default};
