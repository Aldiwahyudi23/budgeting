import{d as p,k as h,m as P,c as A,o as a,w as I,a as t,p as f,e as n,F as g,h as x,t as l,v as S,f as L,n as _,x as V,W as j}from"./app-C0J_Ga6L.js";import{A as z}from"./AppLayout-TVAd3EVF.js";import"./auto-C0VlNTRY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const J={class:"p-4"},K={class:"bg-white p-6 rounded-lg shadow-md mb-6 mt-2"},U={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},Y=["value"],W=["value"],E={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},G={class:"bg-white p-4 rounded-lg shadow-md"},H={class:"flex items-center"},O={class:"ml-4"},Q={class:"text-xl font-bold text-red-600"},q={class:"text-sm text-gray-500"},X={class:"bg-white p-4 rounded-lg shadow-md"},Z={class:"flex items-center"},$={class:"ml-4"},tt={class:"text-xl font-bold text-green-600"},et={class:"text-sm text-gray-500"},st={class:"bg-white p-4 rounded-lg shadow-md"},lt={class:"flex items-center"},ot={class:"ml-4"},at={class:"text-xl font-bold text-blue-600"},nt={class:"bg-white p-4 rounded-lg shadow-md"},rt={class:"flex items-center"},dt={class:"ml-4"},it={class:"text-xl font-bold text-purple-600"},ut={class:"text-sm text-gray-500"},pt={class:"flex flex-col md:flex-row gap-4 mb-6"},ct={class:"bg-white rounded-lg shadow-md overflow-hidden w-full md:w-1/2"},vt={class:"min-w-full responsive-table"},gt={class:"divide-y divide-gray-300 text-gray-700"},xt={class:"px-4 py-3"},mt={class:"px-4 py-3"},ht={class:"px-4 py-3"},bt={class:"px-4 py-3"},yt={key:0},ft={class:"bg-white rounded-lg shadow-md overflow-hidden w-full md:w-1/2"},_t={class:"min-w-full responsive-table"},wt={class:"divide-y divide-gray-300 text-gray-700"},kt={class:"px-4 py-3"},Ct={class:"px-4 py-3"},Mt={class:"px-4 py-3"},Dt={class:"px-4 py-3"},St={key:0},Lt={class:"bg-white p-6 rounded-lg shadow-md"},Nt={class:"mb-4"},Rt={class:"responsive-table"},Tt={class:"min-w-full"},Bt={class:"py-2"},Ft={class:"py-2"},Pt={class:"py-2"},At={class:"flex justify-between items-center mt-4"},It=["disabled"],Vt=["disabled"],w=10,Yt={__name:"Laporan",props:{report:Array},setup(jt){const c=p(new Date().getFullYear()),m=p(new Date().getMonth()+1),N=p(Array.from({length:10},(o,e)=>new Date().getFullYear()-e)),k=p(["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"]),r=p({total_expenses:"",total_income:"",total_savings:"",net_balance:"",transactions:[],report:[],reportIn:[]}),v=p(""),i=p(1),C=h(()=>v.value?r.value.transactions.filter(o=>o.description.toLowerCase().includes(v.value.toLowerCase())||o.category.toLowerCase().includes(v.value.toLowerCase())):r.value.transactions),R=h(()=>{const o=(i.value-1)*w,e=o+w;return C.value.slice(o,e)}),b=h(()=>Math.ceil(C.value.length/w)),T=()=>{i.value<b.value&&i.value++},B=()=>{i.value>1&&i.value--},d=o=>{const e=parseFloat(o);return isNaN(e)?"0":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e).replace("Rp","").trim()},M=o=>{const e=parseFloat(o);return isNaN(e)?"text-gray-500":e<0?"text-red-500":"text-green-500"},F=o=>new Date(o).toLocaleDateString("id-ID"),y=h(()=>k.value[m.value-1]),D=async()=>{j.get(route("laporan"),{year:c.value,month:m.value},{preserveState:!0,onSuccess:o=>{r.value=o.props.report}})};return P(()=>{D()}),(o,e)=>(a(),A(z,{title:"Laporan Keuangan"},{default:I(()=>[t("div",J,[t("div",K,[e[5]||(e[5]=t("h2",{class:"text-lg font-semibold mb-4"},"Filter Laporan",-1)),t("div",U,[t("div",null,[e[3]||(e[3]=t("label",{class:"block text-sm font-medium text-gray-700"},"Tahun",-1)),f(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>c.value=s),class:"mt-1 block w-full border rounded-md p-2"},[(a(!0),n(g,null,x(N.value,s=>(a(),n("option",{key:s,value:s},l(s),9,Y))),128))],512),[[S,c.value]])]),t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium text-gray-700"},"Bulan",-1)),f(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>m.value=s),class:"mt-1 block w-full border rounded-md p-2"},[(a(!0),n(g,null,x(k.value,(s,u)=>(a(),n("option",{key:u,value:u+1},l(s),9,W))),128))],512),[[S,m.value]])]),t("div",{class:"flex items-end"},[t("button",{onClick:D,class:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600"}," Terapkan Filter ")])])]),t("div",E,[t("div",G,[t("div",H,[e[7]||(e[7]=t("div",{class:"bg-red-100 p-2 rounded-full"},[t("svg",{class:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",O,[e[6]||(e[6]=t("h2",{class:"text-lg font-semibold"},"Total Pengeluaran",-1)),t("p",Q,l(d(r.value.total_expenses)),1),t("p",q,l(y.value)+" "+l(c.value),1)])])]),t("div",X,[t("div",Z,[e[9]||(e[9]=t("div",{class:"bg-green-100 p-2 rounded-full"},[t("svg",{class:"w-6 h-6 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",$,[e[8]||(e[8]=t("h2",{class:"text-lg font-semibold"},"Total Pendapatan",-1)),t("p",tt,l(d(r.value.total_income)),1),t("p",et,l(y.value)+" "+l(c.value),1)])])]),t("div",st,[t("div",lt,[e[12]||(e[12]=t("div",{class:"bg-blue-100 p-2 rounded-full"},[t("svg",{class:"w-6 h-6 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})])],-1)),t("div",ot,[e[10]||(e[10]=t("h2",{class:"text-lg font-semibold"},"Saldo Tabungan",-1)),t("p",at,l(d(r.value.total_savings)),1),e[11]||(e[11]=t("p",{class:"text-sm text-gray-500"},"Saldo Saat Ini",-1))])])]),t("div",nt,[t("div",rt,[e[14]||(e[14]=t("div",{class:"bg-purple-100 p-2 rounded-full"},[t("svg",{class:"w-6 h-6 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",dt,[e[13]||(e[13]=t("h2",{class:"text-lg font-semibold"},"Saldo Bersih",-1)),t("p",it,l(d(r.value.net_balance)),1),t("p",ut,l(y.value)+" "+l(c.value),1)])])])]),t("div",pt,[t("div",ct,[e[17]||(e[17]=t("div",{class:"bg-gray-700 text-white text-lg font-bold px-4 py-3"},"Pengeluaran",-1)),t("table",vt,[e[16]||(e[16]=t("thead",{class:"bg-gray-600 text-white text-sm uppercase tracking-wider"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left"},"No"),t("th",{class:"px-4 py-3 text-left"},"Kategori"),t("th",{class:"px-4 py-3 text-left"},"Rencana"),t("th",{class:"px-4 py-3 text-left"},"Aktual"),t("th",{class:"px-4 py-3 text-left"},"Selisih")])],-1)),t("tbody",gt,[(a(!0),n(g,null,x(r.value.report,(s,u)=>(a(),n("tr",{key:u,class:"hover:bg-gray-100"},[t("td",xt,l(u+1),1),t("td",mt,l(s.name||"-"),1),t("td",ht,"Rp "+l(d(s.alokasi)),1),t("td",bt,"Rp "+l(d(s.aktual)),1),t("td",{class:_(["px-4 py-3 font-semibold",M(s.selisih)])}," Rp "+l(d(s.selisih)),3)]))),128)),r.value.report.length===0?(a(),n("tr",yt,e[15]||(e[15]=[t("td",{colspan:"5",class:"px-4 py-3 text-center text-gray-500"},"Tidak ada data laporan.",-1)]))):L("",!0)])])]),t("div",ft,[e[20]||(e[20]=t("div",{class:"bg-gray-700 text-white text-lg font-bold px-4 py-3"},"Pemasukan",-1)),t("table",_t,[e[19]||(e[19]=t("thead",{class:"bg-gray-600 text-white text-sm uppercase tracking-wider"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left"},"No"),t("th",{class:"px-4 py-3 text-left"},"Sumber"),t("th",{class:"px-4 py-3 text-left"},"Rencana"),t("th",{class:"px-4 py-3 text-left"},"Aktual"),t("th",{class:"px-4 py-3 text-left"},"Selisih")])],-1)),t("tbody",wt,[(a(!0),n(g,null,x(r.value.reportIn,(s,u)=>(a(),n("tr",{key:u,class:"hover:bg-gray-100"},[t("td",kt,l(u+1),1),t("td",Ct,l(s.name||"-"),1),t("td",Mt,"Rp "+l(d(s.alokasi)),1),t("td",Dt,"Rp "+l(d(s.aktual)),1),t("td",{class:_(["px-4 py-3 font-semibold",M(s.selisih)])}," Rp "+l(d(s.selisih)),3)]))),128)),r.value.reportIn.length===0?(a(),n("tr",St,e[18]||(e[18]=[t("td",{colspan:"5",class:"px-4 py-3 text-center text-gray-500"},"Tidak ada data laporan.",-1)]))):L("",!0)])])])]),e[23]||(e[23]=t("div",{class:"bg-white p-6 rounded-lg shadow-md mb-6"},[t("h2",{class:"text-lg font-semibold mb-4"},"Grafik Laporan"),t("div",{class:"h-64"},[t("canvas",{id:"reportChart"})])],-1)),t("div",Lt,[e[22]||(e[22]=t("h2",{class:"text-lg font-semibold mb-4"},"Detail Laporan",-1)),t("div",Nt,[f(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>v.value=s),type:"text",placeholder:"Cari transaksi...",class:"w-full p-2 border rounded-md"},null,512),[[V,v.value]])]),t("div",Rt,[t("table",Tt,[e[21]||(e[21]=t("thead",null,[t("tr",null,[t("th",{class:"text-left py-2"},"Tanggal"),t("th",{class:"text-left py-2"},"Kategori"),t("th",{class:"text-left py-2"},"Deskripsi"),t("th",{class:"text-right py-2"},"Jumlah")])],-1)),t("tbody",null,[(a(!0),n(g,null,x(R.value,s=>(a(),n("tr",{key:s.id,class:"border-b"},[t("td",Bt,l(F(s.date)),1),t("td",Ft,l(s.category),1),t("td",Pt,l(s.description),1),t("td",{class:_(["text-right",s.type==="income"?"text-green-500":"text-red-500"])},l(s.type==="income"?"+":"-")+" "+l(d(s.amount)),3)]))),128))])])]),t("div",At,[t("button",{onClick:B,disabled:i.value===1,class:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300"}," back ",8,It),t("span",null,"Hal "+l(i.value)+" dari "+l(b.value),1),t("button",{onClick:T,disabled:i.value===b.value,class:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300"}," next ",8,Vt)])])])]),_:1}))}};export{Yt as default};
