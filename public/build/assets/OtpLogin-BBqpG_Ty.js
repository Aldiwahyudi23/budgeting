import{C as K,d as p,m as P,e as r,o as a,a as t,t as v,q as x,p as h,b as y,z as b,u,F as S,h as T,g as B,A as E,W as M}from"./app-CiG7V5Ha.js";import{_}from"./InputError-BZLZKOH6.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";const $={class:"min-h-screen flex items-center justify-center bg-gray-50 px-4 sm:px-6 lg:px-8"},N={class:"w-full max-w-md"},j={class:"bg-white shadow-lg rounded-lg p-6"},D={class:"text-center text-2xl font-semibold mb-6"},L={class:"flex justify-center space-x-2"},U=["onUpdate:modelValue","id","onInput","onKeydown"],C={key:0,class:"text-center text-sm text-gray-600"},q={key:1,class:"text-center text-sm text-gray-600"},F={__name:"OtpLogin",setup(H){const s=K({phone:"",otp:""}),d=p(!1),n=p(["","","",""]),i=p(90),w=o=>{n.value[o].length===1&&o<3&&document.getElementById(`otp-${o+1}`).focus(),n.value.every(e=>e.length===1)&&(s.otp=n.value.join(""),g())},k=o=>{n.value[o].length===0&&o>0&&document.getElementById(`otp-${o-1}`).focus()},O=()=>{s.post("/check-phone",{onSuccess:()=>{d.value=!0,c()}})},g=()=>{s.post("/verify-otp",{onSuccess:()=>{M.visit("/dashboard")},onError:()=>{n.value=["","","",""],document.getElementById("otp-0").focus()}})},I=()=>{s.post("/resend-otp",{onSuccess:()=>{i.value=90,c()}})},c=()=>{const o=setInterval(()=>{i.value>0?i.value--:clearInterval(o)},1e3)};return P(()=>{d.value&&c()}),(o,e)=>(a(),r("div",$,[t("div",N,[t("div",j,[t("h2",D,v(d.value?"Masukkan Kode OTP":"Login dengan Nomor HP"),1),d.value?(a(),r("form",{key:1,onSubmit:x(g,["prevent"]),class:"space-y-4"},[t("div",L,[(a(!0),r(S,null,T(n.value,(f,l)=>h((a(),r("input",{key:l,"onUpdate:modelValue":m=>n.value[l]=m,type:"text",maxlength:"1",id:`otp-${l}`,class:"w-12 h-12 text-center border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm md:w-16 md:h-16 lg:w-20 lg:h-20",onInput:m=>w(l),onKeydown:E(m=>k(l),["delete"])},null,40,U)),[[b,n.value[l]]])),128))]),y(_,{class:"text-center",message:u(s).errors.otp},null,8,["message"]),i.value>0?(a(),r("div",C," Kode OTP berlaku dalam "+v(i.value)+" detik. ",1)):(a(),r("div",q,[e[3]||(e[3]=B(" Kode OTP sudah tidak berlaku. ")),t("button",{type:"button",onClick:I,class:"text-indigo-600 hover:text-indigo-500"}," Kirim Ulang OTP ")]))],32)):(a(),r("form",{key:0,onSubmit:x(O,["prevent"]),class:"space-y-4"},[t("div",null,[e[1]||(e[1]=t("label",{for:"phone",class:"block text-sm font-medium text-gray-700"},"Nomor HP",-1)),h(t("input",{id:"phone","onUpdate:modelValue":e[0]||(e[0]=f=>u(s).phone=f),type:"text",required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"08xxxxxxxxxx"},null,512),[[b,u(s).phone]]),y(_,{message:u(s).errors.phone},null,8,["message"])]),e[2]||(e[2]=t("div",null,[t("button",{type:"submit",class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Kirim OTP ")],-1))],32)),e[4]||(e[4]=t("div",{class:"text-center mt-4"},[t("a",{href:"/login",class:"text-sm text-indigo-600 hover:text-indigo-500"}," Masuk Menggunakan Email ")],-1))])])]))}},G=V(F,[["__scopeId","data-v-70c92b9b"]]);export{G as default};
