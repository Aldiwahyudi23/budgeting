import{E as J,i as B,d as f,k as R,C as N,c as V,o as u,w as n,a as t,b as o,g as r,u as i,P as W,e as c,F,h as D,t as b,f as $,q as T,p as A,y as j,v as X,H as Y}from"./app-xDsUzAyu.js";import{_ as E}from"./CustomModal-BnviBr1U.js";import{_ as v}from"./PrimaryButton-DnhLbD4T.js";import{_ as K}from"./SecondaryButton-Dt2gU7nE.js";import{_}from"./InputLabel-Bt1oKNcN.js";import{_ as g}from"./TextInput-BYj_b5ry.js";import{_ as x}from"./InputError-D87L32QM.js";import{A as Z}from"./AppLayout-Bf1I7wdw.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-DL5Lhnio.js";const ee={class:"p-4"},te={class:"flex flex-col md:flex-row justify-between items-center mb-4 space-y-4 md:space-y-0"},se={class:"flex space-x-2"},oe={class:"relative"},le={class:"mt-4 overflow-x-auto"},ae={class:"min-w-full border bg-white rounded-lg shadow-md"},ie={class:"px-4 py-2"},ne={class:"px-4 py-2"},de=["checked","onChange"],re={class:"px-4 py-2"},ue={class:"px-4 py-2"},pe={class:"px-4 py-2 text-center"},ce={key:0,class:"px-2 py-1 text-green-700 bg-green-200 rounded-full text-sm"},me={key:1,class:"px-2 py-1 text-red-700 bg-red-200 rounded-full text-sm"},fe={class:"px-4 py-2 text-center"},be={class:"mb-4"},ve={class:"mb-4"},_e={class:"flex items-center"},ge={class:"flex justify-end mt-4"},xe={class:"mb-4"},ke=["value","disabled"],ye={key:0},we={class:"mb-4"},he={class:"mb-4"},Se={class:"flex items-center"},Ce={class:"flex justify-end mt-4"},je={__name:"Index",setup(Ve){const p=J([...B().props.categories]),y=f(!1),w=f(!1),m=f(!1),h=f(""),M=f(B().props.settings),P=R(()=>p.filter(l=>l.name.toLowerCase().includes(h.value.toLowerCase()))),L={id:"",name:"",description:"",is_active:!1},I={category_id:"",name:"",description:"",is_active:!1},a=N({...L}),d=N({...I}),U=(l,e=null)=>{m.value=l==="edit",m.value&&e?(a.id=e.id,a.name=e.name,a.description=e.description,a.is_active=!!e.is_active):a.reset(),y.value=!0},q=l=>{d.category_id=l.id,w.value=!0},k=()=>{a.reset(),y.value=!1},S=()=>{d.reset(),w.value=!1},H=()=>{m.value?a.put(route("category.update",a.id),{onSuccess:()=>{const l=p.findIndex(e=>e.id===a.id);l!==-1&&(p[l]={...a.data()}),k()}}):a.post(route("category.store"),{onSuccess:l=>{p.unshift(l.props.categories[0]),k()}})},O=()=>{d.post(route("sub-category.store"),{onSuccess:()=>{S()}})},z=l=>{confirm("Apakah Anda yakin ingin menghapus kategori ini?")&&a.delete(route("category.destroy",l),{onSuccess:()=>{const e=p.findIndex(s=>s.id===l);e!==-1&&p.splice(e,1)}})},Q=async l=>{try{l.public=!l.public,await Y.patch(`/categories/${l.id}/update-public`,{public:l.public})}catch{l.public=!l.public}};return(l,e)=>(u(),V(Z,{title:"Category"},{default:n(()=>[t("div",ee,[e[24]||(e[24]=t("div",{class:"bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded mb-4"},[t("p",{class:"text-sm"}," Centang 'Publik' di bawah jika ingin data ini dapat digunakan oleh pengguna lain. ")],-1)),t("div",te,[t("div",se,[o(v,{onClick:e[0]||(e[0]=s=>U("create"))},{default:n(()=>e[9]||(e[9]=[r("Tambah Kategori")])),_:1}),o(i(W),{href:l.route("categories.manage"),class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md"},{default:n(()=>e[10]||(e[10]=[r(" Kelola Kategori ")])),_:1},8,["href"])]),t("div",oe,[o(g,{modelValue:h.value,"onUpdate:modelValue":e[1]||(e[1]=s=>h.value=s),placeholder:"Cari Kategori...",class:"pl-10 pr-4 py-2 border rounded-md w-64"},null,8,["modelValue"]),e[11]||(e[11]=t("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-4.35-4.35m0 0A8.5 8.5 0 1010.5 19a8.5 8.5 0 006.15-2.85z"})],-1))])]),t("div",le,[t("table",ae,[e[15]||(e[15]=t("thead",{class:"bg-gray-200"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left"},"No"),t("th",{class:"px-4 py-2 text-left"},"Public"),t("th",{class:"px-4 py-2 text-left"},"Nama"),t("th",{class:"px-4 py-2 text-left"},"Deskripsi"),t("th",{class:"px-4 py-2 text-center"},"Status"),t("th",{class:"px-4 py-2 text-center"},"Aksi")])],-1)),t("tbody",null,[(u(!0),c(F,null,D(P.value,(s,G)=>(u(),c("tr",{key:s.id,class:"border-b hover:bg-gray-100"},[t("td",ie,b(G+1),1),t("td",ne,[t("input",{type:"checkbox",checked:s.public,onChange:C=>Q(s),class:"form-checkbox h-5 w-5 text-blue-600"},null,40,de)]),t("td",re,b(s.name),1),t("td",ue,b(s.description||"-"),1),t("td",pe,[s.is_active?(u(),c("span",ce,"Aktif")):(u(),c("span",me,"Tidak Aktif"))]),t("td",fe,[M.value.btn_edit?(u(),V(K,{key:0,onClick:C=>U("edit",s)},{default:n(()=>e[12]||(e[12]=[r("Edit")])),_:2},1032,["onClick"])):$("",!0),M.value.btn_delete?(u(),V(v,{key:1,class:"ml-2 bg-red-600 hover:bg-red-700",onClick:C=>z(s.id)},{default:n(()=>e[13]||(e[13]=[r("Hapus")])),_:2},1032,["onClick"])):$("",!0),o(v,{class:"ml-2 bg-blue-600 hover:bg-blue-700",onClick:C=>q(s)},{default:n(()=>e[14]||(e[14]=[r("+ Sub")])),_:2},1032,["onClick"])])]))),128))])])]),o(E,{show:y.value,title:m.value?"Edit Kategori":"Tambah Kategori",onClose:k},{content:n(()=>[t("form",{onSubmit:T(H,["prevent"])},[t("div",be,[o(_,{for:"name"},{default:n(()=>e[16]||(e[16]=[r(" Nama Kategori "),t("span",{class:"text-red-500 text-sm"},"*",-1)])),_:1}),o(g,{id:"name",modelValue:i(a).name,"onUpdate:modelValue":e[2]||(e[2]=s=>i(a).name=s),class:"block w-full",required:""},null,8,["modelValue"]),o(x,{message:i(a).errors.name},null,8,["message"])]),t("div",ve,[o(_,{for:"description",value:"Deskripsi"}),o(g,{id:"description",modelValue:i(a).description,"onUpdate:modelValue":e[3]||(e[3]=s=>i(a).description=s),class:"block w-full"},null,8,["modelValue"]),o(x,{message:i(a).errors.description},null,8,["message"])]),t("div",_e,[A(t("input",{type:"checkbox",id:"is_active","onUpdate:modelValue":e[4]||(e[4]=s=>i(a).is_active=s),class:"mr-2"},null,512),[[j,i(a).is_active]]),e[17]||(e[17]=t("label",{for:"is_active"},"Aktif",-1))]),t("div",ge,[o(K,{type:"button",onClick:k},{default:n(()=>e[18]||(e[18]=[r("Batal")])),_:1}),o(v,{class:"ml-3",type:"submit"},{default:n(()=>[r(b(m.value?"Update":"Simpan"),1)]),_:1})])],32)]),_:1},8,["show","title"]),o(E,{show:w.value,title:"Tambah Sub Kategori",onClose:S},{content:n(()=>[t("form",{onSubmit:T(O,["prevent"])},[t("div",xe,[o(_,{for:"category_id"},{default:n(()=>e[19]||(e[19]=[r(" Kategori "),t("span",{class:"text-red-500 text-sm"},"*",-1)])),_:1}),A(t("select",{id:"category_id","onUpdate:modelValue":e[5]||(e[5]=s=>i(d).category_id=s),class:"block w-full border rounded-md p-2"},[(u(!0),c(F,null,D(p,s=>(u(),c("option",{key:s.id,value:s.id,disabled:!s.is_active},[r(b(s.name)+" ",1),s.is_active?$("",!0):(u(),c("span",ye,"(Tidak Aktif)"))],8,ke))),128))],512),[[X,i(d).category_id]]),o(x,{message:i(d).errors.category_id},null,8,["message"])]),t("div",we,[o(_,{for:"name"},{default:n(()=>e[20]||(e[20]=[r(" Nama Sub Kategori "),t("span",{class:"text-red-500 text-sm"},"*",-1)])),_:1}),o(g,{id:"name",modelValue:i(d).name,"onUpdate:modelValue":e[6]||(e[6]=s=>i(d).name=s),class:"block w-full"},null,8,["modelValue"]),o(x,{message:i(d).errors.name},null,8,["message"])]),t("div",he,[o(_,{for:"description",value:"Deskripsi"}),o(g,{id:"description",modelValue:i(d).description,"onUpdate:modelValue":e[7]||(e[7]=s=>i(d).description=s),class:"block w-full"},null,8,["modelValue"]),o(x,{message:i(d).errors.description},null,8,["message"])]),t("div",Se,[A(t("input",{type:"checkbox",id:"is_active","onUpdate:modelValue":e[8]||(e[8]=s=>i(d).is_active=s),class:"mr-2"},null,512),[[j,i(d).is_active]]),e[21]||(e[21]=t("label",{for:"is_active"},"Aktif",-1))]),t("div",Ce,[o(K,{type:"button",onClick:S},{default:n(()=>e[22]||(e[22]=[r("Batal")])),_:1}),o(v,{class:"ml-3",type:"submit"},{default:n(()=>e[23]||(e[23]=[r("Simpan")])),_:1})])],32)]),_:1},8,["show"])])]),_:1}))}};export{je as default};
