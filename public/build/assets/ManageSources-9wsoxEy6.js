import{d as f,k as D,c as B,o as l,w as g,a as t,b as K,g as m,e as r,F as _,h as b,n as S,p as y,y as w,f as k,t as u,W as M}from"./app-BrPtzkkN.js";import{A as $}from"./AppLayout-C79_jNCB.js";import{_ as q}from"./PrimaryButton-WwNLqnzx.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-DlF4K_pY.js";const F={class:"p-4"},L={class:"container mx-auto p-2"},O={class:"flex justify-between items-center mb-6"},T={class:"bg-white rounded-lg shadow-md overflow-x-auto"},U={class:"min-w-full table-auto"},W={class:"divide-y divide-gray-200"},j={class:"px-6 py-4 whitespace-nowrap"},z=["value","disabled","onChange"],G={class:"px-6 py-4 whitespace-nowrap"},I={class:"category-name font-medium"},P={key:0,class:"text-xs text-red-500 ml-2"},H={class:"text-xs text-gray-500"},J={class:"px-6 py-4 whitespace-nowrap subcategory-indent"},Q=["value","disabled","onChange"],R={class:"px-6 py-4 whitespace-nowrap subcategory-indent"},X={class:"subcategory-name font-medium"},Y={key:0,class:"text-xs text-red-500 ml-2"},Z={class:"text-xs text-gray-500"},ee={key:1},te={__name:"ManageSources",props:{categories:Array,subCategories:Array,userCategories:Array,userSubCategories:Array},setup(C){const d=C,i=f([]),n=f([]),x=D(()=>{const s=new Set;return d.categories.filter(e=>s.has(e.name)?!1:(s.add(e.name),!0))}),v=s=>d.subCategories.filter(e=>e.source_id===s),c=s=>d.userCategories.some(e=>e.name===s.name),p=s=>d.userSubCategories.some(e=>e.name===s.name),A=s=>{n.value.includes(s.id)?i.value.includes(s.source_id)||i.value.push(s.source_id):d.subCategories.some(a=>a.source_id===s.source_id&&n.value.includes(a.id))||(i.value=i.value.filter(a=>a!==s.source_id))},N=s=>{i.value.includes(s.id)||(n.value=n.value.filter(e=>!v(s.id).some(a=>a.id===e)))},V=()=>{M.post(route("sources.save"),{categories:i.value,subCategories:n.value},{onSuccess:()=>{i.value=[],n.value=[]},onError:()=>{alert("Gagal menyimpan data. Silakan coba lagi.")}})};return(s,e)=>(l(),B($,{title:"Kelola Kategori"},{default:g(()=>[t("div",F,[t("div",L,[t("div",O,[e[3]||(e[3]=t("h3",{class:"text-xl font-semibold text-gray-800"},"Kelola Source",-1)),K(q,{onClick:V},{default:g(()=>e[2]||(e[2]=[m("Simpan Source Dipilih")])),_:1})]),t("div",T,[t("table",U,[e[5]||(e[5]=t("thead",{class:"bg-gray-200"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Pilih"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nama Source")])],-1)),t("tbody",W,[x.value.length>0?(l(!0),r(_,{key:0},b(x.value,a=>(l(),r(_,{key:a.id},[t("tr",{class:S({"disabled-row bg-blue-100":c(a)})},[t("td",j,[y(t("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=o=>i.value=o),value:a.id,disabled:c(a),onChange:o=>N(a)},null,40,z),[[w,i.value]])]),t("td",G,[t("div",I,[m(u(a.name)+" ",1),c(a)?(l(),r("span",P,"(Sudah Ada)")):k("",!0)]),t("div",H,u(a.description),1)])],2),(l(!0),r(_,null,b(v(a.id),o=>(l(),r("tr",{key:o.id,class:S({"disabled-row":p(o)})},[t("td",J,[y(t("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=h=>n.value=h),value:o.id,disabled:p(o),onChange:h=>A(o)},null,40,Q),[[w,n.value]])]),t("td",R,[t("div",X,[m(u(o.name)+" ",1),p(o)?(l(),r("span",Y,"(Sudah Ada)")):k("",!0)]),t("div",Z,u(o.description),1)])],2))),128))],64))),128)):(l(),r("tr",ee,e[4]||(e[4]=[t("td",{colspan:"2",class:"px-6 py-4 text-center text-sm text-gray-500"},"Tidak ada data source.",-1)])))])])])])])]),_:1}))}},le=E(te,[["__scopeId","data-v-aac6713c"]]);export{le as default};
