import{d as D,C as z,k as v,l as G,c as Q,o as i,w as m,a as t,e as u,f as p,b as r,t as d,g as l,F as h,h as w,n as X,q as Y,u as o,p as y,v as $,y as A,W as K}from"./app-BAOndlI2.js";import{A as Z}from"./AppLayout-BudElh9R.js";import{_ as tt}from"./CustomModal-Dr3Fy5f8.js";import{_ as C}from"./PrimaryButton-mjiLLIlT.js";import{_ as et}from"./SecondaryButton-CurAdCmn.js";import{_ as k}from"./InputLabel-BJhzS3hS.js";import{_ as P}from"./TextInput-BitYVA7p.js";import{_ as x}from"./InputError-BYa4BhiO.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const at={class:"p-4"},st={key:0,class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded"},nt={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},lt={class:"container mx-auto p-2"},ot={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center bg-white p-4 rounded-lg shadow-md mb-2"},it={key:0,class:"mt-6 text-ligth hidden sm:block"},rt={class:"flex items-center gap-2 mt-4 sm:mt-0"},ut={key:0},dt={class:"bg-white p-4 rounded-lg shadow-md"},mt=["onClick"],pt={class:"text-gray-800"},gt={class:"text-purple-600 font-semibold"},ct={key:1,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-4"},ft={class:"flex items-center justify-between"},yt={class:"text-lg font-semibold"},kt={class:"text-gray-500 text-sm"},xt={class:"text-sm text-gray-500"},bt={class:"text-xl font-bold text-purple-600"},_t={key:0,class:"text-sm text-gray-500"},vt={key:1,class:"text-sm text-gray-500"},ht={key:2,class:"text-sm text-gray-500"},wt={key:3,class:"text-sm text-green-500"},Ct={key:4,class:"text-sm text-blue-500"},Ht={class:"mt-4 flex justify-between items-center"},Tt={class:"flex space-x-2"},Vt=["href"],St={key:2,class:"text-center bg-white p-2 rounded-lg shadow-md mt-4"},Dt={class:"mb-4"},$t={class:"mb-4"},At={class:"mb-4"},Pt={class:"mb-4"},Bt={key:0,class:"mb-4"},Mt=["value"],Ut={key:1,class:"mb-4"},jt=["value"],Et={class:"mb-4"},It={class:"flex items-center"},Kt={class:"mb-4"},Nt={class:"flex items-center"},Ft={class:"mb-4"},Jt={class:"flex items-center"},Lt={class:"flex justify-end mt-4"},Zt={__name:"Index",props:{debts:Array},setup(N){const H=N,T=D(!1),c=D(!1),b=D(!1),s=z({id:null,name:"",amount:"",note:"",type:"",due_date:null,tenor_months:null,is_active:!1,reminder:!1,auto:!1}),B=(n,e=null)=>{var a,g;c.value=n==="edit",c.value&&e?(s.id=e.id,s.name=((a=e.sub_category)==null?void 0:a.name)||"",s.note=e.note,s.amount=e.amount,s.type=e.type,s.due_date=e.due_date,s.tenor_months=e.tenor_months,s.reminder=!!e.reminder,s.auto=!!e.auto,s.is_active=!!((g=e.sub_category)!=null&&g.is_active)):s.reset(),T.value=!0},f=()=>{s.reset(),T.value=!1},F=()=>{c.value?s.put(route("debts.update",s.id),{onSuccess:()=>{f()},onError:n=>{console.error("Error saat mengupdate data:",n)},onFinish:()=>{f()}}):s.post(route("debts.store"),{onSuccess:()=>{f()},onError:n=>{console.error("Error saat menyimpan data:",n)},onFinish:()=>{f()}})},J=n=>{confirm("Apakah Anda yakin ingin menghapus bill ini?")&&K.delete(route("debts.destroy",n))},M=v(()=>H.debts.filter(n=>n.status==="active")),U=v(()=>H.debts.filter(n=>n.status!=="active")),j=v(()=>H.debts.filter(n=>n.status==="paid")),_=n=>n?new Intl.NumberFormat("id-ID").format(n):"",L=n=>n?n.replace(/\./g,""):"",V=v({get:()=>_(s.amount),set:n=>{s.amount=L(n)}});G(()=>{V.value=_(s.amount)});const q=n=>n?new Date(n).getDate():"",O=n=>n.type==="installment"&&n.expenses?`${n.expenses.length}-${n.tenor_months}`:"",E=()=>{b.value=!b.value},R=n=>{K.visit(route("history_pembayaran_debt",{id:n}))};return(n,e)=>(i(),Q(Z,{title:"Kelola Hutang"},{default:m(()=>[t("div",at,[n.$page.props.flash.success?(i(),u("div",st,d(n.$page.props.flash.success),1)):p("",!0),n.$page.props.flash.error?(i(),u("div",nt,d(n.$page.props.flash.error),1)):p("",!0),t("div",lt,[t("div",ot,[t("div",null,[e[10]||(e[10]=t("h1",{class:"text-xl font-semibold text-gray-800"},"Kelola Hutang",-1)),e[11]||(e[11]=t("p",{class:"text-sm text-gray-600 mt-1"}," Halaman ini digunakan untuk mengelola dan menambahkan data hutang seperti hutang pribadi, cicilan, atau hutang bisnis. ",-1)),U.value.length>0?(i(),u("div",it,[t("a",{onClick:E,class:"text-sm text-blue-500 hover:text-blue-700 cursor-pointer"},d(b.value?"Sembunyikan Hutang Selesai":"Lihat Hutang Selesai"),1)])):p("",!0)]),t("div",rt,[r(C,{onClick:e[0]||(e[0]=a=>B("create"))},{default:m(()=>e[12]||(e[12]=[l("Tambah Hutang")])),_:1}),U.value.length>0?(i(),u("a",{key:0,onClick:E,class:"text-sm text-blue-500 hover:text-blue-700 cursor-pointer sm:hidden text-right"},d(b.value?"Sembunyikan Hutang Selesai":"Lihat Hutang Selesai"),1)):p("",!0)])]),b.value&&j.value.length>0?(i(),u("div",ut,[e[13]||(e[13]=t("h2",{class:"text-lg font-semibold mb-4"},"Hutang yang Sudah Dibayar",-1)),t("div",dt,[(i(!0),u(h,null,w(j.value,a=>{var g;return i(),u("div",{key:a.id,class:"flex justify-between items-center py-2 border-b last:border-b-0 cursor-pointer hover:bg-gray-50",onClick:S=>R(a.id)},[t("span",pt,d(((g=a.sub_category)==null?void 0:g.name)||"Tanpa Kategori")+" ("+d(a.type=="installment"?"Kredit/Cicilan":a.type)+")",1),t("span",gt,"Rp "+d(_(a.amount)),1)],8,mt)}),128))])])):p("",!0),M.value.length>0?(i(),u("div",ct,[(i(!0),u(h,null,w(M.value,a=>{var g,S,I;return i(),u("div",{key:a.id,class:"bg-white p-6 rounded-lg shadow-md"},[t("div",ft,[t("h2",yt,[l(d(((g=a.sub_category)==null?void 0:g.name)||"Tanpa Kategori")+" ",1),t("span",kt,"("+d(a.type=="installment"?"Kredit/Cicilan":a.type)+")",1)]),t("span",{class:X(["px-2 py-1 text-xs font-semibold rounded-lg",(S=a.sub_category)!=null&&S.is_active?"bg-green-100 text-green-600":"bg-red-100 text-red-600"])},d((I=a.sub_category)!=null&&I.is_active?"Aktif":"Tidak Aktif"),3)]),t("p",xt,d(a.note),1),t("p",bt,"Rp "+d(_(a.amount)),1),a.type==="personal"?(i(),u("p",_t," Pembayaran = "+d(_(a.paid_amount)),1)):p("",!0),a.type==="installment"?(i(),u("p",vt," Tenor = "+d(O(a)),1)):p("",!0),a.type==="installment"?(i(),u("p",ht,"Tanggal Jatuh Tempo: "+d(q(a.due_date)),1)):p("",!0),a.reminder?(i(),u("p",wt," Hutang ini di set Pengingat dan akan diingatkan selalu. ")):p("",!0),a.auto?(i(),u("p",Ct," Setiap tanggal jatuh tempo, hutang akan otomatis tersimpan ke data. ")):p("",!0),t("div",Ht,[t("div",Tt,[r(C,{onClick:W=>B("edit",a)},{default:m(()=>e[14]||(e[14]=[l("Edit")])),_:2},1032,["onClick"]),r(C,{class:"bg-red-600 hover:bg-red-700",onClick:W=>J(a.id)},{default:m(()=>e[15]||(e[15]=[l("Hapus")])),_:2},1032,["onClick"])]),t("a",{href:n.route("history_pembayaran_debt",{id:a.id}),class:"text-sm text-blue-500 hover:text-blue-700 underline"}," History Pembayaran ",8,Vt)])])}),128))])):(i(),u("div",St,e[16]||(e[16]=[t("p",{class:"text-gray-500 text-sm"},"Belum ada hutang yang tercatat. Silakan tambahkan hutang baru.",-1)]))),e[17]||(e[17]=t("div",{class:"mt-4 bg-gray-100 p-2 rounded-lg shadow-md"},[t("h2",{class:"text-lg font-semibold text-gray-800"},"Informasi Mengenai Hutang"),t("p",{class:"text-sm text-gray-600 mb-4"}," Halaman ini digunakan untuk mencatat semua hutang, baik hutang perorangan maupun hutang bertenor seperti kredit atau cicilan. Berikut cara menambahkan hutang: "),t("ul",{class:"text-sm text-gray-600 list-disc list-inside mb-6"},[t("li",null,"Klik tombol di atas kanan untuk menambahkan hutang baru."),t("li",null,'Pilih nama hutang (misal: "Hutang ke Ahmad" atau "Kredivo").'),t("li",null,"Tambahkan catatan (opsional)."),t("li",null,[l("Masukkan nominal: "),t("ul",{class:"list-circle list-inside ml-4"},[t("li",null,[t("strong",null,"Personal"),l(": Masukkan total hutang.")]),t("li",null,[t("strong",null,"Cicilan"),l(": Masukkan cicilan per bulannya.")])])]),t("li",null,[l("Pilih jenis hutang: "),t("strong",null,"Personal"),l(" atau "),t("strong",null,"Cicilan"),l(".")]),t("li",null,[l("Jika memilih "),t("strong",null,"Cicilan"),l(", tentukan tanggal jatuh tempo dan tenor (dalam bulan).")]),t("li",null,"Aktifkan hutang untuk memulai pencatatan."),t("li",null,[l("Pilih mode pembayaran: "),t("ul",{class:"list-circle list-inside ml-4"},[t("li",null,[t("strong",null,"Auto"),l(": Pembayaran dilakukan otomatis.")]),t("li",null,[t("strong",null,"Reminder"),l(": Dapatkan pengingat sebelum jatuh tempo.")])])])]),t("p",{class:"text-sm text-gray-600 mt-2"},[l(" Untuk pembayaran atau transaksi, silakan lakukan melalui halaman "),t("strong",null,"Transaksi Pengeluaran (Expenses)"),l(". Pilih kategori "),t("strong",null,"Hutang"),l(" dan tambahkan keterangan sesuai jenis hutang yang dibayarkan. ")])],-1))]),r(tt,{show:T.value,title:c.value?"Edit Hutang":"Tambah Hutang",onClose:f},{content:m(()=>[t("form",{onSubmit:Y(F,["prevent"])},[t("div",Dt,[r(k,{for:"name"},{default:m(()=>e[18]||(e[18]=[l(" Nama Hutang "),t("span",{class:"text-red-500 text-sm"},"*",-1)])),_:1}),r(P,{id:"name",modelValue:o(s).name,"onUpdate:modelValue":e[1]||(e[1]=a=>o(s).name=a),class:"block w-full",disabled:c.value,readonly:c.value},null,8,["modelValue","disabled","readonly"]),r(x,{message:o(s).errors.name},null,8,["message"])]),t("div",$t,[r(k,{for:"amount"},{default:m(()=>e[19]||(e[19]=[l(" Nominal Hutang "),t("span",{class:"text-red-500 text-sm"},"*",-1)])),_:1}),r(P,{id:"amount",type:"text",modelValue:V.value,"onUpdate:modelValue":e[2]||(e[2]=a=>V.value=a),onInput:n.handleAmountInput,class:"block w-full"},null,8,["modelValue","onInput"]),r(x,{message:o(s).errors.amount},null,8,["message"])]),t("div",At,[r(k,{for:"note"},{default:m(()=>e[20]||(e[20]=[l(" Catatan ")])),_:1}),r(P,{id:"note",modelValue:o(s).note,"onUpdate:modelValue":e[3]||(e[3]=a=>o(s).note=a),class:"block w-full"},null,8,["modelValue"]),r(x,{message:o(s).errors.note},null,8,["message"])]),t("div",Pt,[r(k,{for:"type"},{default:m(()=>e[21]||(e[21]=[l(" Type Hutang "),t("span",{class:"text-red-500 text-sm"},"*",-1)])),_:1}),y(t("select",{id:"type","onUpdate:modelValue":e[4]||(e[4]=a=>o(s).type=a),class:"block w-full"},e[22]||(e[22]=[t("option",{disabled:"",value:""},"Pilih Tipe",-1),t("option",{value:"personal"},"Personal",-1),t("option",{value:"installment"},"Cicilan",-1)]),512),[[$,o(s).type]]),r(x,{message:o(s).errors.type},null,8,["message"])]),o(s).type==="installment"?(i(),u("div",Bt,[r(k,{for:"due_date"},{default:m(()=>e[23]||(e[23]=[l(" Tanggal Jatuh Tempo "),t("span",{class:"text-red-500 text-sm"},"*",-1)])),_:1}),y(t("select",{id:"due_date","onUpdate:modelValue":e[5]||(e[5]=a=>o(s).due_date=a),class:"block w-full",required:""},[(i(),u(h,null,w(31,a=>t("option",{key:a,value:a},d(a),9,Mt)),64))],512),[[$,o(s).due_date]]),r(x,{message:o(s).errors.due_date},null,8,["message"])])):p("",!0),o(s).type==="installment"?(i(),u("div",Ut,[r(k,{for:"tenor_months"},{default:m(()=>e[24]||(e[24]=[l(" Tenor (Bulan) "),t("span",{class:"text-red-500 text-sm"},"*",-1)])),_:1}),y(t("select",{id:"tenor_months","onUpdate:modelValue":e[6]||(e[6]=a=>o(s).tenor_months=a),class:"block w-full",required:""},[(i(),u(h,null,w(12,a=>t("option",{key:a,value:a},d(a),9,jt)),64))],512),[[$,o(s).tenor_months]]),r(x,{message:o(s).errors.tenor_months},null,8,["message"])])):p("",!0),t("div",Et,[t("label",It,[y(t("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=a=>o(s).is_active=a),class:"mr-2"},null,512),[[A,o(s).is_active]]),e[25]||(e[25]=t("span",null,"Status",-1))]),e[26]||(e[26]=t("p",{class:"text-sm text-gray-500"},"Jika Aktif akan bisa Transaksi",-1))]),t("div",Kt,[t("label",Nt,[y(t("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=a=>o(s).reminder=a),class:"mr-2"},null,512),[[A,o(s).reminder]]),e[27]||(e[27]=t("span",null,"Pengingat",-1))]),e[28]||(e[28]=t("p",{class:"text-sm text-gray-500"},"Akan diingatkan H-1 dari Tanggal",-1))]),t("div",Ft,[t("label",Jt,[y(t("input",{type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=a=>o(s).auto=a),class:"mr-2"},null,512),[[A,o(s).auto]]),e[29]||(e[29]=t("span",null,"Otomatis",-1))]),e[30]||(e[30]=t("p",{class:"text-sm text-gray-500"},"Secara Otomatis Masuk data sesuai tanggal",-1))]),t("div",Lt,[r(et,{type:"button",onClick:f},{default:m(()=>e[31]||(e[31]=[l("Batal")])),_:1}),r(C,{class:"ml-3",type:"submit"},{default:m(()=>[l(d(c.value?"Update":"Simpan"),1)]),_:1})])],32)]),_:1},8,["show","title"])])]),_:1}))}};export{Zt as default};
