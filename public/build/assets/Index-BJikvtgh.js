import{d as g,i as W,C as H,k as _,c as C,o as n,w as d,a as s,e as p,f as b,b as o,t as r,F as D,h as L,n as Q,g as c,p as N,v as R,q as G,u as i,x as J,W as X}from"./app-DKeSbj96.js";import{A as Y}from"./AppLayout-yElaIaAr.js";import{_ as Z}from"./CustomModal-C23G7kJt.js";import{_ as h}from"./PrimaryButton-C1F_WdeX.js";import{_ as B}from"./SecondaryButton-eCVxJd5K.js";import{_ as S}from"./InputLabel-CIGWNRzM.js";import{_ as V}from"./TextInput-CisHvs9i.js";import{_ as $}from"./InputError-DmTB7V1h.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ee={class:"p-4"},se={key:0,class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded"},te={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},ae={class:"mb-2"},oe={class:"grid grid-cols-1 md:grid-cols-3 gap-2"},le={class:"text-gray-700 font-medium"},ne={class:"flex flex-col md:flex-row justify-between items-center mb-4 space-y-4 md:space-y-0"},re={class:"relative"},de={class:"mt-4 overflow-x-auto"},ie={class:"min-w-full border bg-white rounded-lg shadow-md"},ue={class:"bg-gray-200"},pe={key:0,class:"px-4 py-2 text-center"},ce={class:"px-4 py-2"},ge={class:"px-4 py-2"},me={class:"px-4 py-2"},ve={class:"px-4 py-2"},be={class:"px-4 py-2 text-green-600"},fe={class:"px-4 py-2 text-red-600"},ye={class:"px-4 py-2"},_e={key:0,class:"px-4 py-2 text-center"},xe={class:"flex justify-between items-center mt-4"},we={class:"flex items-center space-x-2"},ke={class:"flex space-x-2"},Ce=["disabled"],he=["disabled"],Se={class:"mb-4"},Ve={class:"mb-4"},$e={class:"mb-4"},Me={class:"flex items-center"},Te={class:"flex justify-end mt-4"},Pe={__name:"Index",props:{savings:Array,categories:Array,subCategories:Array},setup(K){const x=K,m=g(W().props.settings),f=g("");g(!1);const w=g(!1);g(!1);const u=g(1),v=g(10),l=H({name:"",description:"",is_active:!0,category_id:""}),j=()=>{const a=x.categories.find(e=>e.name==="Saving (Tabungan)");return a?a.id:null},F=()=>{l.category_id=j(),w.value=!0},k=()=>{l.reset(),w.value=!1},I=()=>{l.post(route("sub-category.store"),{onSuccess:()=>{k(),X.reload()}})},M=_(()=>x.savings.filter(a=>{var e;return a.category.name.toLowerCase().includes(f.value.toLowerCase())||((e=a.sub_category)==null?void 0:e.name.toLowerCase().includes(f.value.toLowerCase()))||a.note.toLowerCase().includes(f.value.toLowerCase())})),P=_(()=>{const a=(u.value-1)*v.value,e=a+v.value;return M.value.slice(a,e)}),T=_(()=>Math.ceil(M.value.length/v.value)),U=()=>{u.value<T.value&&u.value++},E=()=>{u.value>1&&u.value--},q=_(()=>{const a={};return x.savings.forEach(e=>{var t;(!a[e.sub_category_id]||new Date(e.date)>new Date(a[e.sub_category_id].date))&&(a[e.sub_category_id]={id:e.sub_category_id,name:((t=e.sub_category)==null?void 0:t.name)||"Tanpa Sub Kategori",balance:e.balance,date:e.date})}),Object.values(a)}),y=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(a||0);return(a,e)=>(n(),C(Y,{title:"Saving (Tabungan)"},{default:d(()=>[s("div",ee,[a.$page.props.flash.success?(n(),p("div",se,r(a.$page.props.flash.success),1)):b("",!0),a.$page.props.flash.error?(n(),p("div",te,r(a.$page.props.flash.error),1)):b("",!0),s("div",ae,[s("div",oe,[(n(!0),p(D,null,L(q.value,t=>(n(),p("div",{key:t.id,class:"bg-white p-4 rounded-lg shadow-md"},[s("h3",le,r(t.name),1),s("p",{class:Q(["text-2xl font-bold",t.balance<0?"text-red-600":"text-green-600"])},r(y(t.balance)),3)]))),128))])]),s("div",ne,[o(h,{onClick:F},{default:d(()=>e[5]||(e[5]=[c("Tambah Kategori Tabungan")])),_:1}),s("div",re,[o(V,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=t=>f.value=t),placeholder:"Cari Tabungan...",class:"pl-10 pr-4 py-2 border rounded-md w-64"},null,8,["modelValue"]),e[6]||(e[6]=s("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-4.35-4.35m0 0A8.5 8.5 0 1010.5 19a8.5 8.5 0 006.15-2.85z"})],-1))])]),s("div",de,[s("table",ie,[s("thead",ue,[s("tr",null,[e[7]||(e[7]=s("th",{class:"px-4 py-2 text-left"},"No",-1)),e[8]||(e[8]=s("th",{class:"px-4 py-2 text-left"},"Tanggal",-1)),e[9]||(e[9]=s("th",{class:"px-4 py-2 text-left"},"Kategori",-1)),e[10]||(e[10]=s("th",{class:"px-4 py-2 text-left"},"Catatan",-1)),e[11]||(e[11]=s("th",{class:"px-4 py-2 text-left"},"Masuk",-1)),e[12]||(e[12]=s("th",{class:"px-4 py-2 text-left"},"Keluar",-1)),e[13]||(e[13]=s("th",{class:"px-4 py-2 text-left"},"Saldo",-1)),m.value.btn_edit||m.value.btn_delete?(n(),p("th",pe,"Aksi")):b("",!0)])]),s("tbody",null,[(n(!0),p(D,null,L(P.value,(t,z)=>{var A;return n(),p("tr",{key:t.id,class:"border-b hover:bg-gray-100"},[s("td",ce,r((u.value-1)*v.value+z+1),1),s("td",ge,r(t.date),1),s("td",me,r(((A=t.sub_category)==null?void 0:A.name)||"-"),1),s("td",ve,r(t.note||"-"),1),s("td",be,r(t.amount>0?y(t.amount):"-"),1),s("td",fe,r(t.amount<0?y(Math.abs(t.amount)):"-"),1),s("td",ye,r(y(t.balance)),1),m.value.btn_edit||m.value.btn_delete?(n(),p("td",_e,[m.value.btn_edit?(n(),C(B,{key:0,onClick:O=>a.openModal("edit",t)},{default:d(()=>e[14]||(e[14]=[c("Edit")])),_:2},1032,["onClick"])):b("",!0),m.value.btn_delete?(n(),C(h,{key:1,class:"ml-2 bg-red-600 hover:bg-red-700",onClick:O=>a.confirmDelete(t.id)},{default:d(()=>e[15]||(e[15]=[c("Hapus")])),_:2},1032,["onClick"])):b("",!0)])):b("",!0)])}),128))])])]),s("div",xe,[s("div",we,[N(s("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>v.value=t),class:"border rounded-md p-1 text-sm"},e[16]||(e[16]=[s("option",{value:"10"},"10",-1),s("option",{value:"25"},"25",-1),s("option",{value:"50"},"50",-1),s("option",{value:"100"},"100",-1)]),512),[[R,v.value]])]),s("div",ke,[s("button",{onClick:E,disabled:u.value===1,class:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300 disabled:opacity-50"}," back ",8,Ce),s("button",{onClick:U,disabled:u.value===T.value,class:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300 disabled:opacity-50"}," next ",8,he)])]),o(Z,{show:w.value,title:"Nama Kategori Tabungan",onClose:k},{content:d(()=>[s("form",{onSubmit:G(I,["prevent"])},[s("div",Se,[o(S,{for:"name"},{default:d(()=>e[17]||(e[17]=[c(" Nama Kategori Tabungan "),s("span",{class:"text-red-500 text-sm"},"*",-1)])),_:1}),o(V,{id:"name",modelValue:i(l).name,"onUpdate:modelValue":e[2]||(e[2]=t=>i(l).name=t),class:"block w-full",required:""},null,8,["modelValue"]),o($,{message:i(l).errors.name},null,8,["message"])]),s("div",Ve,[o(S,{for:"description"},{default:d(()=>e[18]||(e[18]=[c(" Deskripsi ")])),_:1}),o(V,{id:"description",modelValue:i(l).description,"onUpdate:modelValue":e[3]||(e[3]=t=>i(l).description=t),class:"block w-full"},null,8,["modelValue"]),o($,{message:i(l).errors.description},null,8,["message"])]),s("div",$e,[o(S,{for:"is_active"},{default:d(()=>e[19]||(e[19]=[c(" Status ")])),_:1}),s("div",Me,[N(s("input",{type:"checkbox",id:"is_active","onUpdate:modelValue":e[4]||(e[4]=t=>i(l).is_active=t),class:"mr-2"},null,512),[[J,i(l).is_active]]),e[20]||(e[20]=s("label",{for:"is_active"},"Aktif",-1))]),o($,{message:i(l).errors.is_active},null,8,["message"])]),s("div",Te,[o(B,{type:"button",onClick:k},{default:d(()=>e[21]||(e[21]=[c("Batal")])),_:1}),o(h,{class:"ml-3",type:"submit"},{default:d(()=>e[22]||(e[22]=[c("Simpan")])),_:1})])],32)]),_:1},8,["show"])])]),_:1}))}};export{Pe as default};
