import{z as F,i as y,d as f,j as T,C as j,c as g,o as r,w as i,a as t,b as n,g as u,e as _,F as E,h as L,t as m,f as $,m as z,u as l,l as J,s as W,W as q}from"./app-BAsRu4FG.js";import{_ as H}from"./AppLayout-BJkIyiEt.js";import{_ as O}from"./CustomModal-CTaYHw0f.js";import{_ as k}from"./PrimaryButton--d7rAwVm.js";import{_ as A}from"./SecondaryButton-CdNrAfr3.js";import{_ as w}from"./InputLabel-C3zg-Mom.js";import{_ as v}from"./TextInput-BRg-EK8C.js";import{_ as h}from"./InputError-CnX_wM75.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={class:"p-4"},G={class:"flex flex-col md:flex-row justify-between items-center mb-4 space-y-4 md:space-y-0"},K={class:"relative"},P={class:"mt-4 overflow-x-auto"},X={class:"min-w-full border bg-white rounded-lg shadow-md"},Y={class:"px-4 py-2"},Z={class:"px-4 py-2"},ee={class:"px-4 py-2"},te={class:"px-4 py-2"},se={class:"px-4 py-2 text-center"},oe={key:0,class:"px-2 py-1 text-green-700 bg-green-200 rounded-full text-sm"},ae={key:1,class:"px-2 py-1 text-red-700 bg-red-200 rounded-full text-sm"},ne={class:"px-4 py-2 text-center"},le={class:"mb-4"},ie={class:"mb-4"},re={class:"mb-4"},de={class:"flex items-center mb-4"},ue={class:"flex justify-end mt-4"},ge={__name:"Index",setup(ce){const d=F([...y().props.accountBanks]),b=f(!1),c=f(!1),x=f(""),C=f(y().props.settings),M=T(()=>d.filter(a=>a.name.toLowerCase().includes(x.value.toLowerCase()))),N=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(a||0),D={id:"",name:"",description:"",amount:0,is_active:!1,user_id:y().props.auth.user.id},s=j({...D}),B=(a,e=null)=>{c.value=a==="edit",c.value&&e?(s.id=e.id,s.name=e.name,s.description=e.description,s.amount=e.amount||0,s.is_active=!!e.is_active):s.reset(),b.value=!0},p=()=>{s.reset(),b.value=!1},S=()=>{c.value?s.put(route("account-bank.update",s.id),{onSuccess:()=>{const a=d.findIndex(e=>e.id===s.id);a!==-1&&(d[a]={...s.data()}),p()}}):s.post(route("account-bank.store"),{onSuccess:a=>{d.unshift(a.props.accountBanks[0]),p()}})},I=a=>{confirm("Apakah Anda yakin ingin menghapus rekening bank ini?")&&s.delete(route("account-bank.destroy",a),{onSuccess:()=>{const e=d.findIndex(o=>o.id===a);e!==-1&&d.splice(e,1)}})},R=a=>{q.visit(route("account-bank.mutation",a))};return(a,e)=>(r(),g(H,{title:"Acoount Bank"},{default:i(()=>[t("div",Q,[t("div",G,[n(k,{onClick:e[0]||(e[0]=o=>B("create"))},{default:i(()=>e[6]||(e[6]=[u("Tambah Rekening Bank")])),_:1}),t("div",K,[n(v,{modelValue:x.value,"onUpdate:modelValue":e[1]||(e[1]=o=>x.value=o),placeholder:"Cari Rekening Bank...",class:"pl-10 pr-4 py-2 border rounded-md w-64"},null,8,["modelValue"]),e[7]||(e[7]=t("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-4.35-4.35m0 0A8.5 8.5 0 1010.5 19a8.5 8.5 0 006.15-2.85z"})],-1))])]),t("div",P,[t("table",X,[e[11]||(e[11]=t("thead",{class:"bg-gray-200"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left"},"No"),t("th",{class:"px-4 py-2 text-left"},"Nama"),t("th",{class:"px-4 py-2 text-left"},"Deskripsi"),t("th",{class:"px-4 py-2 text-left"},"Jumlah"),t("th",{class:"px-4 py-2 text-center"},"Status"),t("th",{class:"px-4 py-2 text-center"},"Aksi")])],-1)),t("tbody",null,[(r(!0),_(E,null,L(M.value,(o,U)=>(r(),_("tr",{key:o.id,class:"border-b hover:bg-gray-100"},[t("td",Y,m(U+1),1),t("td",Z,m(o.name),1),t("td",ee,m(o.description||"-"),1),t("td",te,m(N(o.amount)),1),t("td",se,[o.is_active?(r(),_("span",oe,"Aktif")):(r(),_("span",ae,"Tidak Aktif"))]),t("td",ne,[C.value.btn_edit?(r(),g(A,{key:0,onClick:V=>B("edit",o)},{default:i(()=>e[8]||(e[8]=[u("Edit")])),_:2},1032,["onClick"])):$("",!0),n(k,{class:"ml-2 bg-blue-600 hover:bg-blue-700",onClick:V=>R(o.id)},{default:i(()=>e[9]||(e[9]=[u("Mutasi")])),_:2},1032,["onClick"]),C.value.btn_delete?(r(),g(k,{key:1,class:"ml-2 bg-red-600 hover:bg-red-700",onClick:V=>I(o.id)},{default:i(()=>e[10]||(e[10]=[u("Hapus")])),_:2},1032,["onClick"])):$("",!0)])]))),128))])])]),n(O,{show:b.value,title:c.value?"Edit Rekening Bank":"Tambah Rekening Bank",onClose:p},{content:i(()=>[t("form",{onSubmit:z(S,["prevent"])},[t("div",le,[n(w,{for:"name",value:"Nama Rekening Bank"}),n(v,{id:"name",modelValue:l(s).name,"onUpdate:modelValue":e[2]||(e[2]=o=>l(s).name=o),class:"block w-full",required:""},null,8,["modelValue"]),n(h,{message:l(s).errors.name},null,8,["message"])]),t("div",ie,[n(w,{for:"description",value:"Deskripsi"}),n(v,{id:"description",modelValue:l(s).description,"onUpdate:modelValue":e[3]||(e[3]=o=>l(s).description=o),class:"block w-full"},null,8,["modelValue"]),n(h,{message:l(s).errors.description},null,8,["message"])]),t("div",re,[n(w,{for:"amount",value:"Jumlah"}),n(v,{id:"amount",type:"number",modelValue:l(s).amount,"onUpdate:modelValue":e[4]||(e[4]=o=>l(s).amount=o),class:"block w-full"},null,8,["modelValue"]),n(h,{message:l(s).errors.amount},null,8,["message"])]),t("div",de,[J(t("input",{type:"checkbox",id:"is_active","onUpdate:modelValue":e[5]||(e[5]=o=>l(s).is_active=o),class:"mr-2"},null,512),[[W,l(s).is_active]]),e[12]||(e[12]=t("label",{for:"is_active"},"Aktif",-1))]),t("div",ue,[n(A,{type:"button",onClick:p},{default:i(()=>e[13]||(e[13]=[u("Batal")])),_:1}),n(k,{class:"ml-3",type:"submit"},{default:i(()=>[u(m(c.value?"Update":"Simpan"),1)]),_:1})])],32)]),_:1},8,["show","title"])])]),_:1}))}};export{ge as default};
