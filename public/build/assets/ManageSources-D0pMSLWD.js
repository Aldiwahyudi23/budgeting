import{d as x,k as D,c as B,o as l,w as f,a as s,b as K,g as p,e as r,F as m,h as g,n as S,p as b,x as y,f as w,t as C,W as M}from"./app-BAijexpd.js";import{A as $}from"./AppLayout-DlFxLZi-.js";import{_ as q}from"./PrimaryButton-DOrKTp0i.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"p-4"},L={class:"container mx-auto p-2"},O={class:"flex justify-between items-center mb-6"},T={class:"bg-white rounded-lg shadow-md overflow-hidden"},U={class:"min-w-full"},W={class:"divide-y divide-gray-200"},j={class:"px-6 py-4 whitespace-nowrap"},z=["value","disabled","onChange"],G={class:"px-6 py-4 whitespace-nowrap"},I={class:"category-name"},P={key:0,class:"already-exists"},H={class:"px-6 py-4 whitespace-nowrap subcategory-indent"},J=["value","disabled","onChange"],Q={class:"px-6 py-4 whitespace-nowrap subcategory-indent"},R={class:"subcategory-name"},X={key:0,class:"already-exists"},Y={key:1},Z={__name:"ManageSources",props:{categories:Array,subCategories:Array,userCategories:Array,userSubCategories:Array},setup(k){const d=k,i=x([]),n=x([]),_=D(()=>{const t=new Set;return d.categories.filter(e=>t.has(e.name)?!1:(t.add(e.name),!0))}),v=t=>d.subCategories.filter(e=>e.source_id===t),u=t=>d.userCategories.some(e=>e.name===t.name),c=t=>d.userSubCategories.some(e=>e.name===t.name),A=t=>{n.value.includes(t.id)?i.value.includes(t.source_id)||i.value.push(t.source_id):d.subCategories.some(a=>a.source_id===t.source_id&&n.value.includes(a.id))||(i.value=i.value.filter(a=>a!==t.source_id))},N=t=>{i.value.includes(t.id)||(n.value=n.value.filter(e=>!v(t.id).some(a=>a.id===e)))},V=()=>{M.post(route("sources.save"),{categories:i.value,subCategories:n.value},{onSuccess:()=>{i.value=[],n.value=[]},onError:()=>{alert("Gagal menyimpan data. Silakan coba lagi.")}})};return(t,e)=>(l(),B($,{title:"Kelola Kategori"},{default:f(()=>[s("div",F,[s("div",L,[s("div",O,[e[3]||(e[3]=s("h1",{class:"text-2xl font-semibold text-gray-800"},"Kelola Source",-1)),K(q,{onClick:V},{default:f(()=>e[2]||(e[2]=[p("Simpan Source Dipilih")])),_:1})]),s("div",T,[s("table",U,[e[5]||(e[5]=s("thead",{class:"bg-gray-50"},[s("tr",null,[s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Pilih"),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nama Source")])],-1)),s("tbody",W,[_.value.length>0?(l(!0),r(m,{key:0},g(_.value,a=>(l(),r(m,{key:a.id},[s("tr",{class:S({"disabled-row":u(a)})},[s("td",j,[b(s("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=o=>i.value=o),value:a.id,disabled:u(a),onChange:o=>N(a)},null,40,z),[[y,i.value]])]),s("td",G,[s("div",I,[p(C(a.name)+" ",1),u(a)?(l(),r("span",P,"(Sudah Ada)")):w("",!0)])])],2),(l(!0),r(m,null,g(v(a.id),o=>(l(),r("tr",{key:o.id,class:S({"disabled-row":c(o)})},[s("td",H,[b(s("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=h=>n.value=h),value:o.id,disabled:c(o),onChange:h=>A(o)},null,40,J),[[y,n.value]])]),s("td",Q,[s("div",R,[p(C(o.name)+" ",1),c(o)?(l(),r("span",X,"(Sudah Ada)")):w("",!0)])])],2))),128))],64))),128)):(l(),r("tr",Y,e[4]||(e[4]=[s("td",{colspan:"2",class:"px-6 py-4 text-center text-sm text-gray-500"},"Tidak ada data source.",-1)])))])])])])])]),_:1}))}},oe=E(Z,[["__scopeId","data-v-9d093676"]]);export{oe as default};
