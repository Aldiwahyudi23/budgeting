import{d as c,k as i,m as U,c as Y,o as n,w as W,a as t,p as C,e as d,F as g,h as m,t as s,v as I,f as A,n as h,x as G,W as H}from"./app-BrPtzkkN.js";import{A as O}from"./AppLayout-C79_jNCB.js";import"./auto-C0VlNTRY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-DlF4K_pY.js";const Q={class:"p-4"},q={class:"bg-white p-6 rounded-lg shadow-md mb-6 mt-2"},X={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},Z=["value"],$=["value"],tt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},et={class:"bg-white p-4 rounded-lg shadow-md"},st={class:"flex items-center"},lt={class:"ml-4"},ot={class:"text-xl font-bold text-red-600"},at={class:"text-sm text-gray-500"},rt={class:"bg-white p-4 rounded-lg shadow-md"},nt={class:"flex items-center"},dt={class:"ml-4"},it={class:"text-xl font-bold text-green-600"},ut={class:"text-sm text-gray-500"},pt={class:"bg-white p-4 rounded-lg shadow-md"},ct={class:"flex items-center"},vt={class:"ml-4"},xt={class:"text-xl font-bold text-blue-600"},gt={class:"bg-white p-4 rounded-lg shadow-md"},mt={class:"flex items-center"},ht={class:"ml-4"},bt={class:"text-xl font-bold text-purple-600"},yt={class:"text-sm text-gray-500"},ft={class:"flex flex-col md:flex-row gap-4 mb-6"},_t={class:"bg-white rounded-lg shadow-md overflow-hidden w-full md:w-1/2"},wt={class:"min-w-full responsive-table"},kt={class:"divide-y divide-gray-300 text-gray-700"},Ct={class:"px-4 py-3"},Rt={class:"px-4 py-3"},St={class:"px-4 py-3"},Mt={class:"px-4 py-3"},Dt={key:0},Nt={class:"border-t border-gray-300"},Lt={class:"px-4 py-2 text-sm"},Tt={class:"px-4 py-2 text-sm"},It={class:"bg-white rounded-lg shadow-md overflow-hidden w-full md:w-1/2"},At={class:"min-w-full responsive-table"},Bt={class:"divide-y divide-gray-300 text-gray-700"},Ft={class:"px-4 py-3"},Pt={class:"px-4 py-3"},Vt={class:"px-4 py-3"},jt={class:"px-4 py-3"},Kt={key:0},zt={class:"border-t border-gray-300"},Jt={class:"px-4 py-2 text-sm"},Et={class:"px-4 py-2 text-sm"},Ut={class:"bg-white p-6 rounded-lg shadow-md"},Yt={class:"mb-4"},Wt={class:"responsive-table"},Gt={class:"min-w-full"},Ht={class:"py-2"},Ot={class:"py-2"},Qt={class:"py-2"},qt={class:"flex justify-between items-center mt-4"},Xt=["disabled"],Zt=["disabled"],R=10,oe={__name:"Laporan",props:{report:Array},setup(B){const v=c(new Date().getFullYear()),b=c(new Date().getMonth()+1),F=c(Array.from({length:10},(o,e)=>new Date().getFullYear()-e)),S=c(["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"]),r=c({total_expenses:"",total_income:"",total_savings:"",net_balance:"",transactions:[],report:[],reportIn:[]}),x=c(""),p=c(1),M=i(()=>x.value?r.value.transactions.filter(o=>o.description.toLowerCase().includes(x.value.toLowerCase())||o.category.toLowerCase().includes(x.value.toLowerCase())):r.value.transactions),P=i(()=>{const o=(p.value-1)*R,e=o+R;return M.value.slice(o,e)}),f=i(()=>Math.ceil(M.value.length/R)),V=()=>{p.value<f.value&&p.value++},j=()=>{p.value>1&&p.value--},a=o=>{const e=parseFloat(o);return isNaN(e)?"0":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e).replace("Rp","").trim()},y=o=>{const e=parseFloat(o);return isNaN(e)?"text-gray-500":e<0?"text-red-500":"text-green-500"},_=i(()=>r.value.report.reduce((o,e)=>o+(Number(e.alokasi)||0),0)),K=i(()=>["Saving (Tabungan)"]),w=i(()=>r.value.report.reduce((o,e)=>K.value.some(u=>{var T;return(T=e.category_name)==null?void 0:T.toLowerCase().includes(u.toLowerCase())})?o:o+(Number(e.aktual)||0),0)),D=i(()=>_.value-w.value),z=i(()=>r.value.reportIn.reduce((o,e)=>o+(Number(e.alokasi)||0),0)),J=i(()=>r.value.reportIn.reduce((o,e)=>o+(Number(e.aktual)||0),0)),N=i(()=>w.value-_.value),E=o=>new Date(o).toLocaleDateString("id-ID"),k=i(()=>S.value[b.value-1]),L=async()=>{H.get(route("laporan"),{year:v.value,month:b.value},{preserveState:!0,onSuccess:o=>{r.value=o.props.report}})};return U(()=>{L()}),(o,e)=>(n(),Y(O,{title:"Laporan Keuangan"},{default:W(()=>[t("div",Q,[t("div",q,[e[5]||(e[5]=t("h2",{class:"text-lg font-semibold mb-4"},"Filter Laporan",-1)),t("div",X,[t("div",null,[e[3]||(e[3]=t("label",{class:"block text-sm font-medium text-gray-700"},"Tahun",-1)),C(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>v.value=l),class:"mt-1 block w-full border rounded-md p-2"},[(n(!0),d(g,null,m(F.value,l=>(n(),d("option",{key:l,value:l},s(l),9,Z))),128))],512),[[I,v.value]])]),t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium text-gray-700"},"Bulan",-1)),C(t("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>b.value=l),class:"mt-1 block w-full border rounded-md p-2"},[(n(!0),d(g,null,m(S.value,(l,u)=>(n(),d("option",{key:u,value:u+1},s(l),9,$))),128))],512),[[I,b.value]])]),t("div",{class:"flex items-end"},[t("button",{onClick:L,class:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600"}," Terapkan Filter ")])])]),t("div",tt,[t("div",et,[t("div",st,[e[7]||(e[7]=t("div",{class:"bg-red-100 p-2 rounded-full"},[t("svg",{class:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",lt,[e[6]||(e[6]=t("h2",{class:"text-lg font-semibold"},"Total Pengeluaran",-1)),t("p",ot,s(a(r.value.total_expenses)),1),t("p",at,s(k.value)+" "+s(v.value),1)])])]),t("div",rt,[t("div",nt,[e[9]||(e[9]=t("div",{class:"bg-green-100 p-2 rounded-full"},[t("svg",{class:"w-6 h-6 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",dt,[e[8]||(e[8]=t("h2",{class:"text-lg font-semibold"},"Total Pendapatan",-1)),t("p",it,s(a(r.value.total_income)),1),t("p",ut,s(k.value)+" "+s(v.value),1)])])]),t("div",pt,[t("div",ct,[e[12]||(e[12]=t("div",{class:"bg-blue-100 p-2 rounded-full"},[t("svg",{class:"w-6 h-6 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})])],-1)),t("div",vt,[e[10]||(e[10]=t("h2",{class:"text-lg font-semibold"},"Saldo Tabungan",-1)),t("p",xt,s(a(r.value.total_savings)),1),e[11]||(e[11]=t("p",{class:"text-sm text-gray-500"},"Saldo Saat Ini",-1))])])]),t("div",gt,[t("div",mt,[e[14]||(e[14]=t("div",{class:"bg-purple-100 p-2 rounded-full"},[t("svg",{class:"w-6 h-6 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",ht,[e[13]||(e[13]=t("h2",{class:"text-lg font-semibold"},"Saldo Bersih",-1)),t("p",bt,s(a(r.value.net_balance)),1),t("p",yt,s(k.value)+" "+s(v.value),1)])])])]),t("div",ft,[t("div",_t,[e[18]||(e[18]=t("div",{class:"bg-gray-700 text-white text-lg font-bold px-4 py-3"},"Pengeluaran",-1)),t("table",wt,[e[17]||(e[17]=t("thead",{class:"bg-gray-600 text-white text-sm uppercase tracking-wider"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left"},"No"),t("th",{class:"px-4 py-3 text-left"},"Kategori"),t("th",{class:"px-4 py-3 text-left"},"Rencana"),t("th",{class:"px-4 py-3 text-left"},"Aktual"),t("th",{class:"px-4 py-3 text-left"},"Selisih")])],-1)),t("tbody",kt,[(n(!0),d(g,null,m(r.value.report,(l,u)=>(n(),d("tr",{key:u,class:"hover:bg-gray-100"},[t("td",Ct,s(u+1),1),t("td",Rt,s(l.name||"-"),1),t("td",St,"Rp "+s(a(l.alokasi)),1),t("td",Mt,"Rp "+s(a(l.aktual)),1),t("td",{class:h(["px-4 py-3 font-semibold",y(l.selisih)])}," Rp "+s(a(l.selisih)),3)]))),128)),B.report.length===0?(n(),d("tr",Dt,e[15]||(e[15]=[t("td",{colspan:"5",class:"px-4 py-3 text-center text-gray-500"},"Tidak ada data laporan.",-1)]))):A("",!0)]),t("tfoot",null,[t("tr",Nt,[e[16]||(e[16]=t("td",{colspan:"2",class:"px-4 py-2 text-right text-sm font-medium"},"Total Keseluruhan:",-1)),t("td",Lt,"Rp "+s(a(_.value)),1),t("td",Tt,"Rp "+s(a(w.value)),1),t("td",{class:h(["px-4 py-2 text-sm font-semibold",y(D.value)])}," Rp "+s(a(D.value)),3)])])])]),t("div",It,[e[22]||(e[22]=t("div",{class:"bg-gray-700 text-white text-lg font-bold px-4 py-3"},"Pemasukan",-1)),t("table",At,[e[21]||(e[21]=t("thead",{class:"bg-gray-600 text-white text-sm uppercase tracking-wider"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left"},"No"),t("th",{class:"px-4 py-3 text-left"},"Sumber"),t("th",{class:"px-4 py-3 text-left"},"Rencana"),t("th",{class:"px-4 py-3 text-left"},"Aktual"),t("th",{class:"px-4 py-3 text-left"},"Selisih")])],-1)),t("tbody",Bt,[(n(!0),d(g,null,m(r.value.reportIn,(l,u)=>(n(),d("tr",{key:u,class:"hover:bg-gray-100"},[t("td",Ft,s(u+1),1),t("td",Pt,s(l.name||"-"),1),t("td",Vt,"Rp "+s(a(l.alokasi)),1),t("td",jt,"Rp "+s(a(l.aktual)),1),t("td",{class:h(["px-4 py-3 font-semibold",y(l.selisih)])}," Rp "+s(a(l.selisih)),3)]))),128)),r.value.reportIn.length===0?(n(),d("tr",Kt,e[19]||(e[19]=[t("td",{colspan:"5",class:"px-4 py-3 text-center text-gray-500"},"Tidak ada data laporan.",-1)]))):A("",!0)]),t("tfoot",null,[t("tr",zt,[e[20]||(e[20]=t("td",{colspan:"2",class:"px-4 py-2 text-right text-sm font-medium"},"Total Keseluruhan:",-1)),t("td",Jt,"Rp "+s(a(z.value)),1),t("td",Et,"Rp "+s(a(J.value)),1),t("td",{class:h(["px-4 py-2 text-sm font-semibold",y(N.value)])}," Rp "+s(a(N.value)),3)])])])])]),e[25]||(e[25]=t("div",{class:"bg-white p-6 rounded-lg shadow-md mb-6"},[t("h2",{class:"text-lg font-semibold mb-4"},"Grafik Laporan"),t("div",{class:"h-64"},[t("canvas",{id:"reportChart"})])],-1)),t("div",Ut,[e[24]||(e[24]=t("h2",{class:"text-lg font-semibold mb-4"},"Detail Laporan",-1)),t("div",Yt,[C(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>x.value=l),type:"text",placeholder:"Cari transaksi...",class:"w-full p-2 border rounded-md"},null,512),[[G,x.value]])]),t("div",Wt,[t("table",Gt,[e[23]||(e[23]=t("thead",null,[t("tr",null,[t("th",{class:"text-left py-2"},"Tanggal"),t("th",{class:"text-left py-2"},"Kategori"),t("th",{class:"text-left py-2"},"Deskripsi"),t("th",{class:"text-right py-2"},"Jumlah")])],-1)),t("tbody",null,[(n(!0),d(g,null,m(P.value,l=>(n(),d("tr",{key:l.id,class:"border-b"},[t("td",Ht,s(E(l.date)),1),t("td",Ot,s(l.category),1),t("td",Qt,s(l.description),1),t("td",{class:h(["text-right",l.type==="income"?"text-green-500":"text-red-500"])},s(l.type==="income"?"+":"-")+" "+s(a(l.amount)),3)]))),128))])])]),t("div",qt,[t("button",{onClick:j,disabled:p.value===1,class:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300"}," back ",8,Xt),t("span",null,"Hal "+s(p.value)+" dari "+s(f.value),1),t("button",{onClick:V,disabled:p.value===f.value,class:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300"}," next ",8,Zt)])])])]),_:1}))}};export{oe as default};
