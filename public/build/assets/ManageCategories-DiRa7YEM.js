import{d as v,k as N,c as V,o as n,w as x,a as t,b as B,g as p,e as r,F as m,h as f,n as y,p as b,x as S,f as w,t as C,W as M}from"./app-CiG7V5Ha.js";import{A as $}from"./AppLayout-p8Layiy-.js";import{_ as q}from"./PrimaryButton-ButEf8Hu.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"p-4"},L={class:"container mx-auto p-2"},O={class:"flex justify-between items-center mb-6"},T={class:"bg-white rounded-lg shadow-md overflow-hidden"},U={class:"min-w-full"},W={class:"divide-y divide-gray-200"},j={class:"px-6 py-4 whitespace-nowrap"},z=["value","disabled","onChange"],G={class:"px-6 py-4 whitespace-nowrap"},I={class:"category-name"},P={key:0,class:"already-exists"},H={class:"px-6 py-4 whitespace-nowrap subcategory-indent"},J=["value","disabled","onChange"],Q={class:"px-6 py-4 whitespace-nowrap subcategory-indent"},R={class:"subcategory-name"},X={key:0,class:"already-exists"},Y={key:1},Z={__name:"ManageCategories",props:{categories:Array,subCategories:Array,userCategories:Array,userSubCategories:Array},setup(k){const d=k,o=v([]),l=v([]),_=N(()=>{const s=new Set;return d.categories.filter(e=>s.has(e.name)?!1:(s.add(e.name),!0))}),g=s=>d.subCategories.filter(e=>e.category_id===s),c=s=>d.userCategories.some(e=>e.name===s.name),u=s=>d.userSubCategories.some(e=>e.name===s.name),A=s=>{l.value.includes(s.id)?o.value.includes(s.category_id)||o.value.push(s.category_id):d.subCategories.some(a=>a.category_id===s.category_id&&l.value.includes(a.id))||(o.value=o.value.filter(a=>a!==s.category_id))},D=s=>{o.value.includes(s.id)||(l.value=l.value.filter(e=>!g(s.id).some(a=>a.id===e)))},K=()=>{M.post(route("categories.save"),{categories:o.value,subCategories:l.value},{onSuccess:()=>{alert("Data berhasil disimpan!"),o.value=[],l.value=[]},onError:()=>{alert("Gagal menyimpan data. Silakan coba lagi.")}})};return(s,e)=>(n(),V($,{title:"Kelola Kategori"},{default:x(()=>[t("div",F,[t("div",L,[t("div",O,[e[3]||(e[3]=t("h1",{class:"text-2xl font-semibold text-gray-800"},"Kelola Kategori",-1)),B(q,{onClick:K},{default:x(()=>e[2]||(e[2]=[p("Simpan Kategori Dipilih")])),_:1})]),t("div",T,[t("table",U,[e[5]||(e[5]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Pilih"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nama Kategori")])],-1)),t("tbody",W,[_.value.length>0?(n(!0),r(m,{key:0},f(_.value,a=>(n(),r(m,{key:a.id},[t("tr",{class:y({"disabled-row":c(a)})},[t("td",j,[b(t("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=i=>o.value=i),value:a.id,disabled:c(a),onChange:i=>D(a)},null,40,z),[[S,o.value]])]),t("td",G,[t("div",I,[p(C(a.name)+" ",1),c(a)?(n(),r("span",P,"(Sudah Ada)")):w("",!0)])])],2),(n(!0),r(m,null,f(g(a.id),i=>(n(),r("tr",{key:i.id,class:y({"disabled-row":u(i)})},[t("td",H,[b(t("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=h=>l.value=h),value:i.id,disabled:u(i),onChange:h=>A(i)},null,40,J),[[S,l.value]])]),t("td",Q,[t("div",R,[p(C(i.name)+" ",1),u(i)?(n(),r("span",X,"(Sudah Ada)")):w("",!0)])])],2))),128))],64))),128)):(n(),r("tr",Y,e[4]||(e[4]=[t("td",{colspan:"2",class:"px-6 py-4 text-center text-sm text-gray-500"},"Tidak ada data kategori.",-1)])))])])])])])]),_:1}))}},ie=E(Z,[["__scopeId","data-v-e11a9755"]]);export{ie as default};
