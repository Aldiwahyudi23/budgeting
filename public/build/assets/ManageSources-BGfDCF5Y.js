import{d as f,k as D,c as B,o as l,w as g,a as s,b as K,g as m,e as r,F as _,h as b,n as S,p as y,y as w,f as k,t as u,W as M}from"./app-DleQbrcg.js";import{A as $}from"./AppLayout-DXH1zN3w.js";import{_ as q}from"./PrimaryButton-Dryx_lj1.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"p-4"},L={class:"container mx-auto p-2"},O={class:"flex justify-between items-center mb-6"},T={class:"bg-white rounded-lg shadow-md overflow-x-auto"},U={class:"min-w-full table-auto"},W={class:"divide-y divide-gray-200"},j={class:"px-6 py-4 whitespace-nowrap"},z=["value","disabled","onChange"],G={class:"px-6 py-4 whitespace-nowrap"},I={class:"category-name font-medium"},P={key:0,class:"text-xs text-red-500 ml-2"},H={class:"text-xs text-gray-500"},J={class:"px-6 py-4 whitespace-nowrap subcategory-indent"},Q=["value","disabled","onChange"],R={class:"px-6 py-4 whitespace-nowrap subcategory-indent"},X={class:"subcategory-name font-medium"},Y={key:0,class:"text-xs text-red-500 ml-2"},Z={class:"text-xs text-gray-500"},ee={key:1},se={__name:"ManageSources",props:{categories:Array,subCategories:Array,userCategories:Array,userSubCategories:Array},setup(C){const d=C,i=f([]),n=f([]),x=D(()=>{const t=new Set;return d.categories.filter(e=>t.has(e.name)?!1:(t.add(e.name),!0))}),v=t=>d.subCategories.filter(e=>e.source_id===t),c=t=>d.userCategories.some(e=>e.name===t.name),p=t=>d.userSubCategories.some(e=>e.name===t.name),A=t=>{n.value.includes(t.id)?i.value.includes(t.source_id)||i.value.push(t.source_id):d.subCategories.some(a=>a.source_id===t.source_id&&n.value.includes(a.id))||(i.value=i.value.filter(a=>a!==t.source_id))},N=t=>{i.value.includes(t.id)||(n.value=n.value.filter(e=>!v(t.id).some(a=>a.id===e)))},V=()=>{M.post(route("sources.save"),{categories:i.value,subCategories:n.value},{onSuccess:()=>{i.value=[],n.value=[]},onError:()=>{alert("Gagal menyimpan data. Silakan coba lagi.")}})};return(t,e)=>(l(),B($,{title:"Kelola Kategori"},{default:g(()=>[s("div",F,[s("div",L,[s("div",O,[e[3]||(e[3]=s("h3",{class:"text-xl font-semibold text-gray-800"},"Kelola Source",-1)),K(q,{onClick:V},{default:g(()=>e[2]||(e[2]=[m("Simpan Source Dipilih")])),_:1})]),s("div",T,[s("table",U,[e[5]||(e[5]=s("thead",{class:"bg-gray-200"},[s("tr",null,[s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Pilih"),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nama Source")])],-1)),s("tbody",W,[x.value.length>0?(l(!0),r(_,{key:0},b(x.value,a=>(l(),r(_,{key:a.id},[s("tr",{class:S({"disabled-row bg-blue-100":c(a)})},[s("td",j,[y(s("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=o=>i.value=o),value:a.id,disabled:c(a),onChange:o=>N(a)},null,40,z),[[w,i.value]])]),s("td",G,[s("div",I,[m(u(a.name)+" ",1),c(a)?(l(),r("span",P,"(Sudah Ada)")):k("",!0)]),s("div",H,u(a.description),1)])],2),(l(!0),r(_,null,b(v(a.id),o=>(l(),r("tr",{key:o.id,class:S({"disabled-row":p(o)})},[s("td",J,[y(s("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=h=>n.value=h),value:o.id,disabled:p(o),onChange:h=>A(o)},null,40,Q),[[w,n.value]])]),s("td",R,[s("div",X,[m(u(o.name)+" ",1),p(o)?(l(),r("span",Y,"(Sudah Ada)")):k("",!0)]),s("div",Z,u(o.description),1)])],2))),128))],64))),128)):(l(),r("tr",ee,e[4]||(e[4]=[s("td",{colspan:"2",class:"px-6 py-4 text-center text-sm text-gray-500"},"Tidak ada data source.",-1)])))])])])])])]),_:1}))}},ne=E(se,[["__scopeId","data-v-aac6713c"]]);export{ne as default};
