import{B as ee,d as x,i as q,j as te,C as F,c as N,o as u,w as i,a as t,e as f,f as w,b as s,t as c,g as d,F as E,h as J,u as l,P as se,q as j,p as L,y as oe,v as ne,W as le}from"./app-DBiucBkR.js";import{A as ae}from"./AppLayout-BI2M7VZQ.js";import{_ as I}from"./CustomModal-CTDXuHqr.js";import{_ as v}from"./PrimaryButton-BDBZEjPd.js";import{_ as B}from"./SecondaryButton-CMQqJvuj.js";import{_ as b}from"./InputLabel-BkdM2JL6.js";import{_ as k}from"./TextInput-BZo7SZEP.js";import{_ as g}from"./InputError-D4HwAbFQ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ie={class:"p-4"},de={key:0,class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded"},re={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},ue={class:"flex flex-col md:flex-row justify-between items-center mb-4 space-y-4 md:space-y-0"},me={class:"relative"},pe={class:"mt-4 overflow-x-auto"},ce={class:"min-w-full border bg-white rounded-lg shadow-md"},fe={class:"px-4 py-2"},ve={class:"px-4 py-2"},be={class:"px-4 py-2"},ke={class:"px-4 py-2 text-center"},ge={key:0,class:"px-2 py-1 text-green-700 bg-green-200 rounded-full text-sm"},_e={key:1,class:"px-2 py-1 text-red-700 bg-red-200 rounded-full text-sm"},xe={class:"px-4 py-2 text-center"},ye={class:"mt-6 bg-white p-4 rounded-lg shadow-md"},we={class:"flex items-center justify-between"},he={class:"flex items-center"},Ce={class:"ml-3"},Ve={class:"text-xl font-bold text-purple-600"},Be={class:"mb-4"},Me={class:"mb-4"},Se={class:"mb-4"},$e={class:"flex items-center mb-4"},Ae={class:"flex justify-end mt-4"},Te={class:"mb-4"},Ue={class:"text-lg font-semibold"},De={class:"mb-4"},Fe={class:"mb-4"},Ne={class:"flex justify-end mt-4"},je={class:"mb-4"},Ie=["value","disabled"],Pe={key:0},Re={class:"mb-4"},We={class:"mb-4"},qe={class:"flex justify-end mt-4"},Xe={__name:"Index",props:{accountBanks:Array,cashBalance:Number},setup(P){const m=ee([...P.accountBanks]),M=x(!1),y=x(!1),S=x(""),$=x(!1),A=x(!1),h=x(null),R=x(q().props.settings),O=te(()=>m.filter(n=>n.name.toLowerCase().includes(S.value.toLowerCase()))),T=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(n||0),z={id:"",name:"",description:"",amount:0,is_active:!1,user_id:q().props.auth.user.id},a=F({...z}),W=(n,e=null)=>{y.value=n==="edit",y.value&&e?(a.id=e.id,a.name=e.name,a.description=e.description,a.amount=e.amount||0,a.is_active=!!e.is_active):a.reset(),M.value=!0},C=()=>{a.reset(),M.value=!1},H=()=>{y.value?a.put(route("account-bank.update",a.id),{onSuccess:()=>{const n=m.findIndex(e=>e.id===a.id);n!==-1&&(m[n]={...a.data()}),C()}}):a.post(route("account-bank.store"),{onSuccess:n=>{m.unshift(n.props.accountBanks[0]),C()}})},K=n=>{confirm("Apakah Anda yakin ingin menghapus rekening bank ini?")&&a.delete(route("account-bank.destroy",n),{onSuccess:()=>{const e=m.findIndex(o=>o.id===n);e!==-1&&m.splice(e,1)}})},p=F({amount:0,note:"",bank_id:null}),Q=n=>{h.value=n,p.bank_id=n.id,$.value=!0},U=()=>{p.reset(),$.value=!1},Y=()=>{p.post(route("account-bank.withdraw"),{onSuccess:()=>{U();const n=m.findIndex(e=>e.id===h.value.id);n!==-1&&(m[n].amount-=p.amount)}})},r=F({amount:0,note:"",bank_id:null}),G=()=>{A.value=!0},D=()=>{r.reset(),A.value=!1},X=()=>{r.post(route("account-bank.deposit"),{onSuccess:()=>{D();const n=m.findIndex(e=>e.id===r.bank_id);n!==-1&&(m[n].amount+=r.amount)}})},Z=n=>{le.visit(route("account-bank.mutation",n))};return(n,e)=>(u(),N(ae,{title:"Account Bank"},{default:i(()=>[t("div",ie,[n.$page.props.flash.success?(u(),f("div",de,c(n.$page.props.flash.success),1)):w("",!0),n.$page.props.flash.error?(u(),f("div",re,c(n.$page.props.flash.error),1)):w("",!0),t("div",ue,[s(v,{onClick:e[0]||(e[0]=o=>W("create"))},{default:i(()=>e[11]||(e[11]=[d("Tambah Rekening Bank")])),_:1}),t("div",me,[s(k,{modelValue:S.value,"onUpdate:modelValue":e[1]||(e[1]=o=>S.value=o),placeholder:"Cari Rekening Bank...",class:"pl-10 pr-4 py-2 border rounded-md w-64"},null,8,["modelValue"]),e[12]||(e[12]=t("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-4.35-4.35m0 0A8.5 8.5 0 1010.5 19a8.5 8.5 0 006.15-2.85z"})],-1))])]),t("div",pe,[t("table",ce,[e[17]||(e[17]=t("thead",{class:"bg-gray-200"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left"},"No"),t("th",{class:"px-4 py-2 text-left"},"Nama"),t("th",{class:"px-4 py-2 text-left"},"Jumlah"),t("th",{class:"px-4 py-2 text-center"},"Status"),t("th",{class:"px-4 py-2 text-center"},"Aksi")])],-1)),t("tbody",null,[(u(!0),f(E,null,J(O.value,(o,V)=>(u(),f("tr",{key:o.id,class:"border-b hover:bg-gray-100"},[t("td",fe,c(V+1),1),t("td",ve,c(o.name),1),t("td",be,c(T(o.amount)),1),t("td",ke,[o.is_active?(u(),f("span",ge,"Aktif")):(u(),f("span",_e,"Tidak Aktif"))]),t("td",xe,[R.value.btn_edit?(u(),N(B,{key:0,onClick:_=>W("edit",o)},{default:i(()=>e[13]||(e[13]=[d("Edit")])),_:2},1032,["onClick"])):w("",!0),s(v,{class:"ml-2 bg-blue-600 hover:bg-blue-700",onClick:_=>Z(o.id)},{default:i(()=>e[14]||(e[14]=[d("Mutasi")])),_:2},1032,["onClick"]),s(v,{class:"ml-2 bg-green-600 hover:bg-green-700",onClick:_=>Q(o)},{default:i(()=>e[15]||(e[15]=[d("Tarik Tunai")])),_:2},1032,["onClick"]),R.value.btn_delete?(u(),N(v,{key:1,class:"ml-2 bg-red-600 hover:bg-red-700",onClick:_=>K(o.id)},{default:i(()=>e[16]||(e[16]=[d("Hapus")])),_:2},1032,["onClick"])):w("",!0)])]))),128))])])]),t("div",ye,[t("div",we,[t("div",he,[e[20]||(e[20]=t("div",{class:"bg-purple-100 p-2 rounded-full"},[t("svg",{class:"w-5 h-5 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",Ce,[e[19]||(e[19]=t("h2",{class:"text-base font-semibold"},"Saldo Cash",-1)),t("p",Ve,c(T(P.cashBalance)),1),s(l(se),{href:n.route("debits.index"),class:"text-xs text-gray-500 hover:text-purple-600"},{default:i(()=>e[18]||(e[18]=[d("Klik untuk melihat detail mutasi")])),_:1},8,["href"])])]),s(v,{class:"bg-green-600 hover:bg-green-700",onClick:G},{default:i(()=>e[21]||(e[21]=[d("Setor Tunai")])),_:1})])]),s(I,{show:M.value,title:y.value?"Edit Rekening Bank":"Tambah Rekening Bank",onClose:C},{content:i(()=>[t("form",{onSubmit:j(H,["prevent"])},[t("div",Be,[s(b,{for:"name",value:"Nama Rekening Bank"}),s(k,{id:"name",modelValue:l(a).name,"onUpdate:modelValue":e[2]||(e[2]=o=>l(a).name=o),class:"block w-full",required:""},null,8,["modelValue"]),s(g,{message:l(a).errors.name},null,8,["message"])]),t("div",Me,[s(b,{for:"description",value:"Deskripsi"}),s(k,{id:"description",modelValue:l(a).description,"onUpdate:modelValue":e[3]||(e[3]=o=>l(a).description=o),class:"block w-full"},null,8,["modelValue"]),s(g,{message:l(a).errors.description},null,8,["message"])]),t("div",Se,[s(b,{for:"amount",value:"Jumlah"}),s(k,{id:"amount",type:"number",modelValue:l(a).amount,"onUpdate:modelValue":e[4]||(e[4]=o=>l(a).amount=o),class:"block w-full"},null,8,["modelValue"]),s(g,{message:l(a).errors.amount},null,8,["message"])]),t("div",$e,[L(t("input",{type:"checkbox",id:"is_active","onUpdate:modelValue":e[5]||(e[5]=o=>l(a).is_active=o),class:"mr-2"},null,512),[[oe,l(a).is_active]]),e[22]||(e[22]=t("label",{for:"is_active"},"Aktif",-1))]),t("div",Ae,[s(B,{type:"button",onClick:C},{default:i(()=>e[23]||(e[23]=[d("Batal")])),_:1}),s(v,{class:"ml-3",type:"submit"},{default:i(()=>[d(c(y.value?"Update":"Simpan"),1)]),_:1})])],32)]),_:1},8,["show","title"]),s(I,{show:$.value,title:"Tarik Tunai ",onClose:U},{content:i(()=>{var o,V;return[t("form",{onSubmit:j(Y,["prevent"])},[t("div",Te,[t("h2",Ue,c((o=h.value)==null?void 0:o.name)+" "+c(T((V=h.value)==null?void 0:V.amount)),1)]),t("div",De,[s(b,{for:"amount",value:"Jumlah Yang Ditarik"}),s(k,{id:"amount",type:"number",modelValue:l(p).amount,"onUpdate:modelValue":e[6]||(e[6]=_=>l(p).amount=_),class:"block w-full",required:""},null,8,["modelValue"]),s(g,{message:l(p).errors.amount},null,8,["message"])]),t("div",Fe,[s(b,{for:"note",value:"Catatan"}),s(k,{id:"note",modelValue:l(p).note,"onUpdate:modelValue":e[7]||(e[7]=_=>l(p).note=_),class:"block w-full"},null,8,["modelValue"]),s(g,{message:l(p).errors.note},null,8,["message"])]),t("div",Ne,[s(B,{type:"button",onClick:U},{default:i(()=>e[24]||(e[24]=[d("Batal")])),_:1}),s(v,{class:"ml-3",type:"submit"},{default:i(()=>e[25]||(e[25]=[d("Tarik/Pindah ke Cash")])),_:1})])],32)]}),_:1},8,["show"]),s(I,{show:A.value,title:"Setor Tunai",onClose:D},{content:i(()=>[t("form",{onSubmit:j(X,["prevent"])},[t("div",je,[s(b,{for:"bank_id",value:"Pilih Bank"}),L(t("select",{id:"bank_id","onUpdate:modelValue":e[8]||(e[8]=o=>l(r).bank_id=o),class:"block w-full border rounded-md p-2"},[e[26]||(e[26]=t("option",{disabled:"",value:""},"Pilih Bank",-1)),(u(!0),f(E,null,J(m,o=>(u(),f("option",{key:o.id,value:o.id,disabled:!o.is_active},[d(c(o.name)+" ",1),o.is_active?w("",!0):(u(),f("span",Pe,"(Tidak Aktif)"))],8,Ie))),128))],512),[[ne,l(r).bank_id]]),s(g,{message:l(r).errors.bank_id},null,8,["message"])]),t("div",Re,[s(b,{for:"amount",value:"Jumlah"}),s(k,{id:"amount",type:"number",modelValue:l(r).amount,"onUpdate:modelValue":e[9]||(e[9]=o=>l(r).amount=o),class:"block w-full",required:""},null,8,["modelValue"]),s(g,{message:l(r).errors.amount},null,8,["message"])]),t("div",We,[s(b,{for:"note",value:"Catatan"}),s(k,{id:"note",modelValue:l(r).note,"onUpdate:modelValue":e[10]||(e[10]=o=>l(r).note=o),class:"block w-full"},null,8,["modelValue"]),s(g,{message:l(r).errors.note},null,8,["message"])]),t("div",qe,[s(B,{type:"button",onClick:D},{default:i(()=>e[27]||(e[27]=[d("Batal")])),_:1}),s(v,{class:"ml-3",type:"submit"},{default:i(()=>e[28]||(e[28]=[d("Setor/Pindah ke Bank")])),_:1})])],32)]),_:1},8,["show"])])]),_:1}))}};export{Xe as default};
