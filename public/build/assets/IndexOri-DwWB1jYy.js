import{d as D,C as R,k as v,l as O,c as W,o as i,w as m,a as e,e as u,f as p,b as r,t as d,g as l,F as h,h as w,n as z,q as G,u as o,p as b,v as S,y as I,W as Q}from"./app-DleQbrcg.js";import{A as X}from"./AppLayout-DXH1zN3w.js";import{_ as Y}from"./CustomModal-DRsnJelY.js";import{_ as $}from"./PrimaryButton-Dryx_lj1.js";import{_ as Z}from"./SecondaryButton-CPJRFxO1.js";import{_ as y}from"./InputLabel-CMjlhJYP.js";import{_ as P}from"./TextInput-D3gskPPg.js";import{_ as k}from"./InputError-BReUkTQ7.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ee={class:"p-4"},te={key:0,class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded"},ae={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},se={class:"container mx-auto p-2"},ne={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center bg-white p-4 rounded-lg shadow-md mb-2"},le={key:0,class:"mt-6 text-ligth hidden sm:block"},oe={class:"flex items-center gap-2 mt-4 sm:mt-0"},ie={key:0},re={class:"bg-white p-4 rounded-lg shadow-md"},ue=["onClick"],de={class:"text-gray-800"},me={class:"text-purple-600 font-semibold"},pe={key:1,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-4"},ge={class:"flex items-center justify-between"},ce={class:"text-lg font-semibold"},fe={class:"text-gray-500 text-sm"},ye={class:"text-sm text-gray-500"},ke={class:"text-xl font-bold text-purple-600"},xe={key:0,class:"text-sm text-gray-500"},_e={key:1,class:"text-sm text-gray-500"},be={key:2,class:"text-sm text-gray-500"},ve={key:3,class:"text-sm text-green-500"},he={class:"mt-4 flex justify-between items-center"},we={class:"flex space-x-2"},Ce=["href"],Te={key:2,class:"text-center bg-white p-2 rounded-lg shadow-md mt-4"},He={class:"mb-4"},Ve={class:"mb-4"},De={class:"mb-4"},Se={class:"mb-4"},$e={key:0,class:"mb-4"},Pe=["value"],Ae={key:1,class:"mb-4"},Be=["value"],Ee={class:"mb-4"},Me={class:"flex items-center"},Ue={class:"mb-4"},je={class:"flex items-center"},Ie={class:"flex justify-end mt-4"},Ge={__name:"IndexOri",props:{debts:Array},setup(K){const C=K,T=D(!1),c=D(!1),x=D(!1),s=R({id:null,name:"",amount:"",note:"",type:"",due_date:null,tenor_months:null,is_active:!1,reminder:!1}),A=(n,t=null)=>{var a,g;c.value=n==="edit",c.value&&t?(s.id=t.id,s.name=((a=t.sub_category)==null?void 0:a.name)||"",s.note=t.note,s.amount=t.amount,s.type=t.type,s.due_date=t.due_date,s.tenor_months=t.tenor_months,s.reminder=!!t.reminder,s.is_active=!!((g=t.sub_category)!=null&&g.is_active)):s.reset(),T.value=!0},f=()=>{s.reset(),T.value=!1},N=()=>{c.value?s.put(route("debts.update",s.id),{onSuccess:()=>{f()},onError:n=>{console.error("Error saat mengupdate data:",n)},onFinish:()=>{f()}}):s.post(route("debts.store"),{onSuccess:()=>{f()},onError:n=>{console.error("Error saat menyimpan data:",n)},onFinish:()=>{f()}})},B=v(()=>C.debts.filter(n=>n.status==="active")),E=v(()=>C.debts.filter(n=>n.status!=="active")),M=v(()=>C.debts.filter(n=>n.status==="paid")),_=n=>n?new Intl.NumberFormat("id-ID").format(n):"",F=n=>n?n.replace(/\./g,""):"",H=v({get:()=>_(s.amount),set:n=>{s.amount=F(n)}});O(()=>{H.value=_(s.amount)});const J=n=>n?new Date(n).getDate():"",L=n=>n.type==="installment"&&n.expenses?`${n.expenses.length}-${n.tenor_months}`:"",U=()=>{x.value=!x.value},q=n=>{Q.visit(route("history_pembayaran_debt",{id:n}))};return(n,t)=>(i(),W(X,{title:"Kelola Hutang"},{default:m(()=>[e("div",ee,[n.$page.props.flash.success?(i(),u("div",te,d(n.$page.props.flash.success),1)):p("",!0),n.$page.props.flash.error?(i(),u("div",ae,d(n.$page.props.flash.error),1)):p("",!0),e("div",se,[e("div",ne,[e("div",null,[t[9]||(t[9]=e("h1",{class:"text-xl font-semibold text-gray-800"},"Kelola Hutang",-1)),t[10]||(t[10]=e("p",{class:"text-sm text-gray-600 mt-1"}," Halaman ini digunakan untuk mengelola dan menambahkan data hutang seperti hutang pribadi, cicilan, atau hutang bisnis. ",-1)),E.value.length>0?(i(),u("div",le,[e("a",{onClick:U,class:"text-sm text-blue-500 hover:text-blue-700 cursor-pointer"},d(x.value?"Sembunyikan Hutang Selesai":"Lihat Hutang Selesai"),1)])):p("",!0)]),e("div",oe,[r($,{onClick:t[0]||(t[0]=a=>A("create"))},{default:m(()=>t[11]||(t[11]=[l("Tambah Hutang")])),_:1}),E.value.length>0?(i(),u("a",{key:0,onClick:U,class:"text-sm text-blue-500 hover:text-blue-700 cursor-pointer sm:hidden text-right"},d(x.value?"Sembunyikan Hutang Selesai":"Lihat Hutang Selesai"),1)):p("",!0)])]),x.value&&M.value.length>0?(i(),u("div",ie,[t[12]||(t[12]=e("h2",{class:"text-lg font-semibold mb-4"},"Hutang yang Sudah Dibayar",-1)),e("div",re,[(i(!0),u(h,null,w(M.value,a=>{var g;return i(),u("div",{key:a.id,class:"flex justify-between items-center py-2 border-b last:border-b-0 cursor-pointer hover:bg-gray-50",onClick:V=>q(a.id)},[e("span",de,d(((g=a.sub_category)==null?void 0:g.name)||"Tanpa Kategori")+" ("+d(a.type=="installment"?"Kredit/Cicilan":a.type)+")",1),e("span",me,"Rp "+d(_(a.amount)),1)],8,ue)}),128))])])):p("",!0),B.value.length>0?(i(),u("div",pe,[(i(!0),u(h,null,w(B.value,a=>{var g,V,j;return i(),u("div",{key:a.id,class:"bg-white p-6 rounded-lg shadow-md"},[e("div",ge,[e("h2",ce,[l(d(((g=a.sub_category)==null?void 0:g.name)||"Tanpa Kategori")+" ",1),e("span",fe,"("+d(a.type=="installment"?"Kredit/Cicilan":a.type)+")",1)]),e("span",{class:z(["px-2 py-1 text-xs font-semibold rounded-lg",(V=a.sub_category)!=null&&V.is_active?"bg-green-100 text-green-600":"bg-red-100 text-red-600"])},d((j=a.sub_category)!=null&&j.is_active?"Aktif":"Tidak Aktif"),3)]),e("p",ye,d(a.note),1),e("p",ke,"Rp "+d(_(a.amount)),1),a.type==="personal"?(i(),u("p",xe," Pembayaran = "+d(_(a.paid_amount)),1)):p("",!0),a.type==="installment"?(i(),u("p",_e," Tenor = "+d(L(a)),1)):p("",!0),a.type==="installment"?(i(),u("p",be,"Tanggal Jatuh Tempo: "+d(J(a.due_date)),1)):p("",!0),a.reminder?(i(),u("p",ve," Hutang ini di set Pengingat dan akan diingatkan selalu. ")):p("",!0),e("div",he,[e("div",we,[r($,{onClick:Ke=>A("edit",a)},{default:m(()=>t[13]||(t[13]=[l("Edit")])),_:2},1032,["onClick"])]),e("a",{href:n.route("history_pembayaran_debt",{id:a.id}),class:"text-sm text-blue-500 hover:text-blue-700 underline"}," History Pembayaran ",8,Ce)])])}),128))])):(i(),u("div",Te,t[14]||(t[14]=[e("p",{class:"text-gray-500 text-sm"},"Belum ada hutang yang tercatat. Silakan tambahkan hutang baru.",-1)]))),t[15]||(t[15]=e("div",{class:"mt-4 bg-gray-100 p-2 rounded-lg shadow-md"},[e("h2",{class:"text-lg font-semibold text-gray-800"},"Informasi Mengenai Hutang"),e("p",{class:"text-sm text-gray-600 mb-4"}," Halaman ini digunakan untuk mencatat semua hutang, baik hutang perorangan maupun hutang bertenor seperti kredit atau cicilan. Berikut cara menambahkan hutang: "),e("ul",{class:"text-sm text-gray-600 list-disc list-inside mb-6"},[e("li",null,"Klik tombol di atas kanan untuk menambahkan hutang baru."),e("li",null,'Pilih nama hutang (misal: "Hutang ke Ahmad" atau "Kredivo").'),e("li",null,"Tambahkan catatan (opsional)."),e("li",null,[l("Masukkan nominal: "),e("ul",{class:"list-circle list-inside ml-4"},[e("li",null,[e("strong",null,"Personal"),l(": Masukkan total hutang.")]),e("li",null,[e("strong",null,"Cicilan"),l(": Masukkan cicilan per bulannya.")])])]),e("li",null,[l("Pilih jenis hutang: "),e("strong",null,"Personal"),l(" atau "),e("strong",null,"Cicilan"),l(".")]),e("li",null,[l("Jika memilih "),e("strong",null,"Cicilan"),l(", tentukan tanggal jatuh tempo dan tenor (dalam bulan).")]),e("li",null,"Aktifkan hutang untuk memulai pencatatan."),e("li",null,[l("Pilih mode pembayaran: "),e("ul",{class:"list-circle list-inside ml-4"},[e("li",null,[e("strong",null,"Reminder"),l(": Dapatkan pengingat sebelum jatuh tempo.")])])])]),e("p",{class:"text-sm text-gray-600 mt-2"},[l(" Untuk pembayaran atau transaksi, silakan lakukan melalui halaman "),e("strong",null,"Transaksi Pengeluaran (Expenses)"),l(". Pilih kategori "),e("strong",null,"Hutang"),l(" dan tambahkan keterangan sesuai jenis hutang yang dibayarkan. ")])],-1))]),r(Y,{show:T.value,title:c.value?"Edit Hutang":"Tambah Hutang",onClose:f},{content:m(()=>[e("form",{onSubmit:G(N,["prevent"])},[e("div",He,[r(y,{for:"name"},{default:m(()=>t[16]||(t[16]=[l(" Nama Hutang "),e("span",{class:"text-red-500 text-sm"},"*",-1)])),_:1}),r(P,{id:"name",modelValue:o(s).name,"onUpdate:modelValue":t[1]||(t[1]=a=>o(s).name=a),class:"block w-full",disabled:c.value,readonly:c.value},null,8,["modelValue","disabled","readonly"]),r(k,{message:o(s).errors.name},null,8,["message"])]),e("div",Ve,[r(y,{for:"amount"},{default:m(()=>t[17]||(t[17]=[l(" Nominal Hutang "),e("span",{class:"text-red-500 text-sm"},"*",-1)])),_:1}),r(P,{id:"amount",type:"text",modelValue:H.value,"onUpdate:modelValue":t[2]||(t[2]=a=>H.value=a),onInput:n.handleAmountInput,class:"block w-full"},null,8,["modelValue","onInput"]),r(k,{message:o(s).errors.amount},null,8,["message"])]),e("div",De,[r(y,{for:"note"},{default:m(()=>t[18]||(t[18]=[l(" Catatan ")])),_:1}),r(P,{id:"note",modelValue:o(s).note,"onUpdate:modelValue":t[3]||(t[3]=a=>o(s).note=a),class:"block w-full"},null,8,["modelValue"]),r(k,{message:o(s).errors.note},null,8,["message"])]),e("div",Se,[r(y,{for:"type"},{default:m(()=>t[19]||(t[19]=[l(" Type Hutang "),e("span",{class:"text-red-500 text-sm"},"*",-1)])),_:1}),b(e("select",{id:"type","onUpdate:modelValue":t[4]||(t[4]=a=>o(s).type=a),class:"block w-full"},t[20]||(t[20]=[e("option",{disabled:"",value:""},"Pilih Tipe",-1),e("option",{value:"personal"},"Personal",-1),e("option",{value:"installment"},"Cicilan",-1)]),512),[[S,o(s).type]]),r(k,{message:o(s).errors.type},null,8,["message"])]),o(s).type==="installment"?(i(),u("div",$e,[r(y,{for:"due_date"},{default:m(()=>t[21]||(t[21]=[l(" Tanggal Jatuh Tempo "),e("span",{class:"text-red-500 text-sm"},"*",-1)])),_:1}),b(e("select",{id:"due_date","onUpdate:modelValue":t[5]||(t[5]=a=>o(s).due_date=a),class:"block w-full",required:""},[(i(),u(h,null,w(31,a=>e("option",{key:a,value:a},d(a),9,Pe)),64))],512),[[S,o(s).due_date]]),r(k,{message:o(s).errors.due_date},null,8,["message"])])):p("",!0),o(s).type==="installment"?(i(),u("div",Ae,[r(y,{for:"tenor_months"},{default:m(()=>t[22]||(t[22]=[l(" Tenor (Bulan) "),e("span",{class:"text-red-500 text-sm"},"*",-1)])),_:1}),b(e("select",{id:"tenor_months","onUpdate:modelValue":t[6]||(t[6]=a=>o(s).tenor_months=a),class:"block w-full",required:""},[(i(),u(h,null,w(12,a=>e("option",{key:a,value:a},d(a),9,Be)),64))],512),[[S,o(s).tenor_months]]),r(k,{message:o(s).errors.tenor_months},null,8,["message"])])):p("",!0),e("div",Ee,[e("label",Me,[b(e("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=a=>o(s).is_active=a),class:"mr-2"},null,512),[[I,o(s).is_active]]),t[23]||(t[23]=e("span",null,"Status",-1))]),t[24]||(t[24]=e("p",{class:"text-sm text-gray-500"},"Jika Aktif akan bisa Transaksi",-1))]),e("div",Ue,[e("label",je,[b(e("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=a=>o(s).reminder=a),class:"mr-2"},null,512),[[I,o(s).reminder]]),t[25]||(t[25]=e("span",null,"Pengingat",-1))]),t[26]||(t[26]=e("p",{class:"text-sm text-gray-500"},"Akan diingatkan H-1 dari Tanggal",-1))]),e("div",Ie,[r(Z,{type:"button",onClick:f},{default:m(()=>t[27]||(t[27]=[l("Batal")])),_:1}),r($,{class:"ml-3",type:"submit"},{default:m(()=>[l(d(c.value?"Update":"Simpan"),1)]),_:1})])],32)]),_:1},8,["show","title"])])]),_:1}))}};export{Ge as default};
